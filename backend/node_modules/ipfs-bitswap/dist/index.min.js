/*! For license information please see index.min.js.LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.IpfsBitswap=t():e.IpfsBitswap=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";(function(e){var r=n(32),i=n(33),s=n(34);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&s(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(f(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return B(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function k(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var s,o=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var f=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===f?0:s-f)){if(-1===f&&(f=s),s-f+1===u)return f*o}else-1!==f&&(s-=s-f),f=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){for(var l=!0,h=0;h<u;h++)if(c(e,s+h)!==c(t,h)){l=!1;break}if(l)return s}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function w(e,t,n,r){return Y(z(t,e.length-n),e,n,r)}function v(e,t,n,r){return Y(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return v(e,t,n,r)}function E(e,t,n,r){return Y(q(t),e,n,r)}function _(e,t,n,r){return Y(function(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,o,a,u,c=e[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(f=u);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return f(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):b.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(r,i),f=e.slice(t,n),l=0;l<a;++l)if(c[l]!==f[l]){s=c[l],o=f[l];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=D(e[s]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,s){return s||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,s){return s||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:z(new u(e,r).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(16))},function(e,t,n){"use strict";e.exports={encode:n(41),decode:n(42),encodingLength:n(43)}},function(e,t,n){"use strict";const r=n(78),i=(e,t,n)=>{let r=0;const i=n.length;for(;r<i;){if(e(t,n[r]))return!0;r+=1}return!1};e.exports={logger:(e,t)=>{const n=["bitswap"];t&&n.push(t),e&&n.push("".concat(e.toB58String().slice(0,8)));const i=r(n.join(":"));return i.error=r(n.concat(["error"]).join(":")),i},includesWith:i,uniqWith:(e,t)=>{let n=0;const r=t.length,s=[];let o;for(;n<r;)o=t[n],i(e,o,s)||(s[s.length]=o),n+=1;return s},groupBy:(e,t)=>t.reduce((t,n)=>{const r=e(n);return t[r]?t[r].push(n):t[r]=[n],t},{}),pullAllWith:(e,t,n)=>t.filter(t=>!i(e,t,n)),sortBy:(e,t)=>Array.prototype.slice.call(t,0).sort((t,n)=>{const r=e(t),i=e(n);return r<i?-1:r>i?1:0}),isMapEqual:(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e){if(!t.has(n))return!1;const e=t.get(n);if("function"==typeof r.equals&&!r.equals(e))return!1;if(r._data&&!r._data.equals(e._data))return!1}return!0}}},function(e,t,n){"use strict";var r=n(0),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e){e.exports=JSON.parse('{"identity":0,"ip4":4,"tcp":6,"sha1":17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"dccp":33,"murmur3-128":34,"murmur3-32":35,"ip6":41,"ip6zone":42,"path":47,"multicodec":48,"multihash":49,"multiaddr":50,"multibase":51,"dns":53,"dns4":54,"dns6":55,"dnsaddr":56,"protobuf":80,"cbor":81,"raw":85,"dbl-sha2-256":86,"rlp":96,"bencode":99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,"sctp":132,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"zcash-block":192,"zcash-tx":193,"stellar-block":208,"stellar-tx":209,"md4":212,"md5":213,"bmt":214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,"zeronet":230,"ed25519-pub":237,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,"udp":273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,"udt":301,"utp":302,"unix":400,"p2p":421,"ipfs":421,"https":443,"onion":444,"onion3":445,"garlic64":446,"garlic32":447,"tls":448,"quic":460,"ws":477,"wss":478,"p2p-websocket-star":479,"http":480,"json":512,"messagepack":513,"x11":4352,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46000,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332}')},function(e,t,n){"use strict";e.exports=function(e,t){var n,r;function i(s){if(n=s,r)return i.abort();!function i(){for(var s=!0,o=!1;s;)if(o=!1,n(null,(function(a,u){if(o=!0,a=a||r){if(s=!1,t)t(!0===a?null:a);else if(a&&!0!==a)throw a}else e&&!1===e(u)||r?(s=!1,n(r||!0,t||function(){})):s||i()})),!o)return void(s=!1)}()}return i.abort=function(e,t){if("function"==typeof e&&(t=e,e=!0),r=e||!0,n)return n(r,t||function(){})},i}},function(e,t,n){"use strict";e.exports=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var n=e.exec(t);return n&&n[0]}:e)}},function(e,t,n){"use strict";const r=n(31),i=n(48),s=n(17),{getName:o}=n(18),a=n(64),u=n(65),{isMapEqual:c}=n(2),f=r(n(81)),l=n(82);class h{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map}get empty(){return 0===this.blocks.size&&0===this.wantlist.size}addEntry(e,t,n){const r=e.toString("base58btc"),i=this.wantlist.get(r);i?(i.priority=t,i.cancel=Boolean(n)):this.wantlist.set(r,new l(e,t,n))}addBlock(e){const t=e.cid.toString("base58btc");this.blocks.set(t,e)}cancel(e){const t=e.toString("base58btc");this.wantlist.delete(t),this.addEntry(e,0,!0)}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},blocks:Array.from(this.blocks.values()).map(e=>e.data)};return this.full&&(e.wantlist.full=!0),f.Message.encode(e)}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},payload:[]};return this.full&&(e.wantlist.full=!0),this.blocks.forEach(t=>{e.payload.push({prefix:t.cid.prefix,data:t.data})}),f.Message.encode(e)}equals(e){return!(this.full!==e.full||!c(this.wantlist,e.wantlist)||!c(this.blocks,e.blocks))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return"BitswapMessage <full: ".concat(this.full,", list: ").concat(e,", blocks: ").concat(t,">")}}h.deserialize=async e=>{const t=f.Message.decode(e),n=t.wantlist&&t.wantlist.full||!1,r=new h(n);return t.wantlist&&t.wantlist.entries.forEach(e=>{const t=new s(e.block);r.addEntry(t,e.priority,e.cancel)}),t.blocks.length>0?(await Promise.all(t.blocks.map(async e=>{const t=await u(e,"sha2-256"),n=new s(t);r.addBlock(new i(e,n))})),r):t.payload.length>0?(await Promise.all(t.payload.map(async e=>{if(!e.prefix||!e.data)return;const t=a(e.prefix),n=t[0],c=t[1],f=t[2],l=await u(e.data,f),h=new s(n,o(c),l);r.addBlock(new i(e.data,h))})),r):r},h.Entry=l,e.exports=h},function(e,t,n){"use strict";const{sortBy:r}=n(2),i=n(83);class s{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,t){const n=e.toString("base58btc"),r=this.set.get(n);r?(r.inc(),r.priority=t):(this.set.set(n,new i(e,t)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString("base58btc"),n=this.set.get(t);n&&(n.dec(),n.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(r(e=>e[1].key,Array.from(this.set.entries())))}contains(e){const t=e.toString("base58btc");return this.set.get(t)}}s.Entry=i,e.exports=s},function(e,t,n){"use strict";t.defined=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))}},function(e,t,n){"use strict";(function(e){const r=n(49),i=n(51);t.names=i.names,t.codes=i.codes,t.defaultLengths=i.defaultLengths;const s=n(1);function o(e){t.decode(e)}t.toHexString=function(t){if(!e.isBuffer(t))throw new Error("must be passed a buffer");return t.toString("hex")},t.fromHexString=function(t){return e.from(t,"hex")},t.toB58String=function(t){if(!e.isBuffer(t))throw new Error("must be passed a buffer");return r.encode(t)},t.fromB58String=function(t){let n=t;return e.isBuffer(t)&&(n=t.toString()),e.from(r.decode(n))},t.decode=function(n){if(!e.isBuffer(n))throw new Error("multihash must be a Buffer");if(n.length<3)throw new Error("multihash too short. must be > 3 bytes.");const r=s.decode(n);if(!t.isValidCode(r))throw new Error("multihash unknown function code: 0x".concat(r.toString(16)));n=n.slice(s.decode.bytes);const o=s.decode(n);if(o<1)throw new Error("multihash invalid length: 0x".concat(o.toString(16)));if((n=n.slice(s.decode.bytes)).length!==o)throw new Error("multihash length inconsistent: 0x".concat(n.toString("hex")));return{code:r,name:i.codes[r],length:o,digest:n}},t.encode=function(n,r,i){if(!n||void 0===r)throw new Error("multihash encode requires at least two args: digest, code");const o=t.coerceCode(r);if(!e.isBuffer(n))throw new Error("digest should be a Buffer");if(null==i&&(i=n.length),i&&n.length!==i)throw new Error("digest length should be equal to specified length.");return e.concat([e.from(s.encode(o)),e.from(s.encode(i)),n])},t.coerceCode=function(e){let n=e;if("string"==typeof e){if(void 0===i.names[e])throw new Error("Unrecognized hash function named: ".concat(e));n=i.names[e]}if("number"!=typeof n)throw new Error("Hash function code should be a number. Got: ".concat(n));if(void 0===i.codes[n]&&!t.isAppCode(n))throw new Error("Unrecognized function code: ".concat(n));return n},t.isAppCode=function(e){return e>0&&e<16},t.isValidCode=function(e){return!!t.isAppCode(e)||!!i.codes[e]},t.validate=o,t.prefix=function(e){return o(e),e.slice(0,2)}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";e.exports={maxProvidersPerRequest:3,providerRequestTimeout:1e4,hasBlockTimeout:15e3,provideTimeout:15e3,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:1e4,maxListeners:1e3}},function(e,t,n){"use strict";var r=n(24);e.exports=function(e,t){if(!e)return function(e,n){return e?r(n,e,t):n(!0)};Array.isArray(e)||(e=Object.keys(e).map((function(t){return e[t]})));var n=0;return function(i,s){if(i)return r(s,i,t);n>=e.length?s(!0):s(null,e[n++])}}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t,n){n||(n=t,t=null);var i=r((function(n){t=e(t,n)}),(function(e){n(e,t)}));return 2===arguments.length?function(e){e(null,(function(r,s){if(r)return n(!0===r?null:r);t=s,i(e)}))}:i}},function(e,t,n){"use strict";var r=n(26);e.exports=function(e){return e=r(e),function(t){return function n(r,i){for(var s,o=!0;o;)o=!1,s=!0,t(r,(function(t,r){if(!t&&!e(r))return s?o=!0:n(t,i);i(t,r)})),s=!1}}}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,s,o,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return e}function l(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,e))}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):b(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function b(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)s(u,this,t);else{var c=u.length,f=b(u,c);for(n=0;n<c;++n)s(f[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,n){"use strict";(function(t){const r=n(10),i=n(52),s=n(18),o=n(4),a=n(63);class u{constructor(e,n,o,a){if(c.isCID(e)){const n=e;return this.version=n.version,this.codec=n.codec,this.multihash=t.from(n.multihash),void(this.multibaseName=n.multibaseName||(0===n.version?"base58btc":"base32"))}if("string"==typeof e){const t=i.isEncoded(e);if(t){const n=i.decode(e);this.version=parseInt(n.slice(0,1).toString("hex"),16),this.codec=s.getCodec(n.slice(1)),this.multihash=s.rmPrefix(n.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=r.fromB58String(e),this.multibaseName="base58btc";return u.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(t.isBuffer(e)){const t=e.slice(0,1),n=parseInt(t.toString("hex"),16);if(1===n){const t=e;this.version=n,this.codec=s.getCodec(t.slice(1)),this.multihash=s.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";u.validateCID(this)}else this.version=e,this.codec=n,this.multihash=o,this.multibaseName=a||(0===e?"base58btc":"base32"),u.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=t.concat([t.from("01","hex"),s.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return t.concat([t.from("0".concat(this.version),"hex"),s.getCodeVarint(this.codec),r.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=r.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new c(0,this.codec,this.multihash)}toV1(){return new c(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=r.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=i.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=a.checkCIDComponents(e);if(t)throw new Error(t)}}const c=n(20)(u,{className:"CID",symbolName:"@ipld/js-cid/CID"});c.codecs=o,e.exports=c}).call(this,n(0).Buffer)},function(e,t,n){"use strict";(function(r){const i=n(1),s=n(59),o=n(60),a=n(19);(t=e.exports).addPrefix=(e,t)=>{let n;if(r.isBuffer(e))n=a.varintBufferEncode(e);else{if(!o[e])throw new Error("multicodec not recognized");n=o[e]}return r.concat([n,t])},t.rmPrefix=e=>(i.decode(e),e.slice(i.decode.bytes)),t.getCodec=e=>{const t=i.decode(e),n=s.get(t);if(void 0===n)throw new Error("Code ".concat(t," not found"));return n},t.getName=e=>s.get(e),t.getNumber=e=>{const t=o[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return a.varintBufferDecode(t)[0]},t.getCode=e=>i.decode(e),t.getCodeVarint=e=>{const t=o[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return t},t.getVarint=e=>i.encode(e);const u=n(61);Object.assign(t,u),t.print=n(62)}).call(this,n(0).Buffer)},function(e,t,n){"use strict";(function(t){const r=n(1);function i(e){return parseInt(e.toString("hex"),16)}function s(e){let n=e.toString(16);return n.length%2==1&&(n="0"+n),t.from(n,"hex")}e.exports={numberToBuffer:s,bufferToNumber:i,varintBufferEncode:function(e){return t.from(r.encode(i(e)))},varintBufferDecode:function(e){return s(r.decode(e))},varintEncode:function(e){return t.from(r.encode(e))}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";e.exports=function(e,{className:t,symbolName:n}){const r=Symbol.for(n),i={[t]:class extends e{constructor(...e){super(...e),Object.defineProperty(this,r,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i["is".concat(t)]=e=>!(!e||!e[r]),i},e.exports.proto=function(e,{className:t,symbolName:n,withoutNew:r}){const i=Symbol.for(n),s={[t]:function(...t){if(r&&!(this instanceof s))return new s(...t);const n=e.call(this,...t)||this;return n&&!n[i]&&Object.defineProperty(n,i,{value:!0}),n}}[t];return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get:()=>t}),s["is".concat(t)]=e=>!(!e||!e[i]),s}},function(e,t,n){"use strict";var r,i,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,f=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?f=c.concat(f):h=-1,f.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=f.length;t;){for(c=f,f=[];++h<t;)c&&c[h].run();h=-1,t=f.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function k(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new b(e,t)),1!==f.length||l||u(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=k,s.addListener=k,s.once=k,s.off=k,s.removeListener=k,s.removeAllListeners=k,s.emit=k,s.prependListener=k,s.prependOnceListener=k,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){var n="Input must be an string, Buffer or Uint8Array";function r(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){var r;if(e instanceof Uint8Array)r=e;else if(e instanceof t)r=new Uint8Array(e);else{if("string"!=typeof e)throw new Error(n);r=new Uint8Array(t.from(e,"utf8"))}return r},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,n){for(var i="\n"+e+" = ",s=0;s<t.length;s+=2){if(32===n)i+=r(t[s]).toUpperCase(),i+=" ",i+=r(t[s+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);i+=r(t[s+1]).toUpperCase(),i+=r(t[s]).toUpperCase()}s%6==4?i+="\n"+new Array(e.length+4).join(" "):s<t.length-2&&(i+=" ")}console.log(i)},testSpeed:function(e,t,n){for(var r=(new Date).getTime(),i=new Uint8Array(t),s=0;s<t;s++)i[s]=s%256;var o=(new Date).getTime();for(console.log("Generated random input in "+(o-r)+"ms"),r=o,s=0;s<n;s++){var a=e(i),u=(new Date).getTime(),c=u-r;r=u,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";e.exports=function(e,t,n){var r;return function(){if(!t)return e.apply(this,arguments);var i=this,s=arguments,o=n&&!r;return clearTimeout(r),r=setTimeout((function(){if(r=null,!o)return e.apply(i,s)}),t),o?e.apply(this,arguments):void 0}}},function(e,t,n){"use strict";e.exports=function(e,t,n){e(t),n&&n(!0===t?null:t)}},function(e,t,n){"use strict";var r=n(24);e.exports=function(e,t){return function(n,i){if(n)return r(i,n,t);if(null!=e){var s=e;e=null,i(null,s)}else i(!0)}}},function(e,t,n){"use strict";var r=n(6);function i(e){return e}e.exports=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:r(e)||i}},function(e,t,n){"use strict";function r(e){return e}var i=n(6),s=n(14);e.exports=function(e,t){e=i(e)||r;var n={};return s((function(r){var i=e(r);return n[i]?!!t:(n[i]=!0,!t)}))}},function(e,t,n){e.exports=n(29)},function(e,t,n){"use strict";function r(e){return new o(e)}function i(e){return function(){return new s(e.apply(this,arguments))}}function s(e){var t,n;function r(t,n){try{var s=e[t](n),a=s.value,u=a instanceof o;Promise.resolve(u?a.wrapped:a).then((function(e){u?r("return"===t?"return":"next",e):i(s.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(c){i("throw",c)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(s,o){var a={key:e,arg:i,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function o(e){this.wrapped=e}function a(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(s.prototype[Symbol.asyncIterator]=function(){return this}),s.prototype.next=function(e){return this._invoke("next",e)},s.prototype.throw=function(e){return this._invoke("throw",e)},s.prototype.return=function(e){return this._invoke("return",e)};const u=n(30),c=n(85),f=n(115),l=n(117),h=n(2).logger,p=n(118),d={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},b=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];e.exports=class{constructor(e,t,n){this._libp2p=e,this._log=h(this.peerInfo.id),this._options=Object.assign({},d,n),this._stats=new p(b,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new c(e,this,{},this._stats),this.blockstore=t,this.engine=new f(this.peerInfo.id,t,this.network,this._stats),this.wm=new u(this.peerInfo.id,this.network,this._stats),this.notifications=new l(this.peerInfo.id)}get peerInfo(){return this._libp2p.peerInfo}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(i){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const n=Array.from(t.blocks.values()),r=n.filter(e=>this.wm.wantlist.contains(e.cid)).map(e=>e.cid);this.wm.cancelWants(r),await Promise.all(n.map(async t=>{const n=r.includes(t.cid);await this._handleReceivedBlock(e,t,n)}))}async _handleReceivedBlock(e,t,n){this._log("received block");const r=await this.blockstore.has(t.cid);this._updateReceiveCounters(e.toB58String(),t,r),!r&&n&&await this.put(t)}_updateReceiveCounters(e,t,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",t.data.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",t.data.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e){var t,n=!0,r=!1;try{for(var i,s,o=a(this.getMany([e]));n=(i=await o.next()).done,s=await i.value,!n;n=!0){return s}}catch(u){r=!0,t=u}finally{try{n||null==o.return||await o.return()}finally{if(r)throw t}}}getMany(e){var t=this;return i((function*(){let n=e.length;const i=[];let s=!1;const o=async e=>{i.push(e);const r=t.notifications.wantBlock(e);n||t.wm.wantBlocks(i);const s=await r;return t.wm.cancelWants([e]),s};for(const a of e){const u=yield r(t.blockstore.has(a));n--,u?(n||t.wm.wantBlocks(i),yield t.blockstore.get(a)):(s||(s=!0,t.network.findAndConnect(e[0]).catch(e=>t._log.error(e))),yield o(a))}}))()}unwant(e){Array.isArray(e)||(e=[e]),this.wm.unwantBlocks(e),e.forEach(e=>this.notifications.unwantBlock(e))}cancelWants(e){Array.isArray(e)||(e=[e]),this.wm.cancelWants(e)}async put(e){return this.putMany([e])}async putMany(e){const t=this;return this.blockstore.putMany(i((function*(){var n,i=!0,s=!1;try{for(var o,u,c=a(e);i=(o=yield r(c.next())).done,u=yield r(o.value),!i;i=!0){const e=u;(yield r(t.blockstore.has(e.cid)))||(yield e,t.notifications.hasBlock(e),t.engine.receivedBlocks([e.cid]),t.network.provide(e.cid).catch(e=>{t._log.error("Failed to provide: %s",e.message)}))}}catch(f){s=!0,n=f}finally{try{i||null==c.return||(yield r(c.return()))}finally{if(s)throw n}}}))())}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(){this.wm.start(),this.network.start(),this.engine.start()}stop(){this._stats.stop(),this.wm.stop(),this.network.stop(),this.engine.stop()}}},function(e,t,n){"use strict";const r=n(7),i=n(8),s=n(11),o=n(84),a=n(2).logger;e.exports=class{constructor(e,t,n){this.peers=new Map,this.wantlist=new i(n),this.network=t,this._stats=n,this._peerId=e,this._log=a(e,"want")}_addEntries(e,t,n){const i=e.map((e,n)=>new r.Entry(e,s.kMaxPriority-n,t));i.forEach(e=>{e.cancel?n?this.wantlist.removeForce(e.cid):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))});for(const r of this.peers.values())r.addEntries(i)}_startPeerHandler(e){let t=this.peers.get(e.toB58String());if(t)return void t.refcnt++;t=new o(this._peerId,e,this.network);const n=new r(!0);for(const r of this.wantlist.entries())n.addEntry(r[1].cid,r[1].priority);return t.addMessage(n),this.peers.set(e.toB58String(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toB58String());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toB58String()))}wantBlocks(e){this._addEntries(e,!1)}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){this.timer=setInterval(()=>{this._log("resend full-wantlist");const e=new r(!0);this.wantlist.forEach(t=>{e.addEntry(t.cid,t.priority)}),this.peers.forEach(t=>t.addMessage(e))},6e4)}stop(){this.peers.forEach(e=>this.disconnected(e.peerId)),clearInterval(this.timer)}}},function(e,t,n){"use strict";(function(t){var r=n(35),i=n(39);e.exports=function(e,n){if(n||(n={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var s="object"!=typeof e||t.isBuffer(e)?r.parse(e):e,o=function(){var e=this;i(s,n.encodings||{}).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return o.prototype.toString=function(){return r.stringify(s)},o.prototype.toJSON=function(){return s},new o}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],a=r[1],u=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),f=0,l=a>0?o-4:o;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[f++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(f(e,o,o+16383>a?a:o+16383));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function f(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){"use strict";t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=e[t+l];for(l+=h,s=p&(1<<-f)-1,p>>=-f,f+=a;f>0;s=256*s+e[t+l],l+=h,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=256*o+e[t+l],l+=h,f-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=c}return(p?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=f?(a=0,o=f):o+l>=1?(a=(t*u-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+p]=255&o,p+=d,o/=256,c-=8);e[n+p-d]|=128*b}},function(e,t,n){"use strict";var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,n){"use strict";var r=n(36),i=n(38);e.exports=r,e.exports.parse=r,e.exports.stringify=i},function(e,t,n){"use strict";var r=n(37),i=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],s=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},o=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=s(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},a=function(e){for(var t={enums:[],messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(o(e));break;case"enum":t.enums.push(d(e));break;case"message":t.messages.push(f(e));break;case"extensions":t.extensions=c(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=o(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(u(e));break;case";":e.shift();break;case"reserved":case"option":for(e.shift();";"!==e[0];)e.shift();break;default:e.unshift("optional"),t.fields.push(o(e))}return t},u=function(e){return{name:e[1],message:f(e)}},c=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},f=function(e){e.shift();var t=1,n=[],r={name:e.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=a(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},l=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=s(e)),e.shift(),{name:t,val:n}},d=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=p(e);n.values[r.name]=r.val}else t=b(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},b=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=k(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},k=function e(t){for(var n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};t.length;){if("}"===t[0])return t.shift(),r;var i="("===t[0];i&&t.shift();var s=t.shift();if(i){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}var o=null;switch(t[0]){case":":if(void 0!==r[s])throw new Error("Duplicate option map key "+s);t.shift(),"{"===(o=n(t.shift()))&&(o=e(t)),r[s]=o,";"===t[0]&&t.shift();break;case"{":if(t.shift(),o=e(t),void 0===r[s]&&(r[s]=[]),!Array.isArray(r[s]))throw new Error("Duplicate option map key "+s);r[s].push(o);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},g=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},m=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=b(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(y(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},y=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=b(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var s;if(/^("|')([^'"]*)$/.test(t[n]))for(s=1===t[n].length?n+1:n;s<t.length;s++)if(/^([^'"]*)("|')$/.test(t[s])){t=t.slice(0,n).concat(t.slice(n,s+1).join("")).concat(t.slice(s+1));break}}for(var o={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},a=!0;t.length;){switch(t[0]){case"package":o.package=l(t);break;case"syntax":if(!a)throw new Error("Protobuf syntax version should be first thing in file");o.syntax=h(t);break;case"message":o.messages.push(f(t));break;case"enum":o.enums.push(d(t));break;case"option":var c=b(t);if(o.options[c.name])throw new Error("Duplicate option "+c.name);o.options[c.name]=c.value;break;case"import":o.imports.push(g(t));break;case"extend":o.extends.push(u(t));break;case"service":o.services||(o.services=[]),o.services.push(m(t));break;default:throw new Error("Unexpected token: "+t[0])}a=!1}return o.extends.forEach((function(e){o.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),o.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,s,a;if(t.options&&"true"===t.options.packed&&-1===i.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],s=n[1],o.messages.some((function(e){if(e.name===r)return a=e,e})),a&&a.enums&&a.enums.some((function(e){return e.name===s})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),o}},function(e,t,n){"use strict";e.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},function(e,t,n){"use strict";var r=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},i=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=o(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=s(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},s=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},o=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var i=typeof r;"object"===i?(r=a(r,[])).length&&t.push("option "+n+" = {",r,"};"):("string"===i&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))})),n.length>0&&t.push(""),t},a=function e(t,n){return Object.keys(t).forEach((function(r){var i=t[r],s=typeof i;"object"===s?Array.isArray(i)?i.forEach((function(t){(t=e(t,[])).length&&n.push(r+" {",t,"}")})):(i=e(i,[])).length&&n.push(r+" {",i,"}"):("string"===s&&(i='"'+i+'"'),n.push(r+": "+i))})),n},u=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=o(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),o(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){i(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){!function e(t,n){n.push("message "+t.name+" {"),t.enums||(t.enums=[]),t.enums.forEach((function(e){n.push(i(e,[]))})),t.messages||(t.messages=[]),t.messages.forEach((function(t){n.push(e(t,[]))}));var s={};return t.fields||(t.fields=[]),t.fields.forEach((function(e){e.oneof?(s[e.oneof]||(s[e.oneof]=[]),s[e.oneof].push(r(e,[]))):n.push(r(e,[]))})),Object.keys(s).forEach((function(e){s[e].unshift("oneof "+e+" {"),s[e].push("}"),n.push(s[e])})),n.push("}",""),n}(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),o(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(u(e,[]))})),t.push("}","")}(e,t)})),t.map(function e(t){return function(n){return Array.isArray(n)?n.map(e(t+"  ")).join("\n"):t+n}}("")).join("\n")}},function(e,t,n){"use strict";var r=n(40),i=n(45),s=n(46),o=n(47),a=n(1);e.exports=function(e,t){var n={},u={},c={};!function e(t,r){t.enums&&t.enums.forEach((function(t){t.id=r+(r?".":"")+t.name,u[t.id]=t,e(t,t.id)})),t.messages&&t.messages.forEach((function(i){i.id=r+(r?".":"")+i.name,n[i.id]=i,i.fields.forEach((function(e){if(e.map){var i="Map_"+e.map.from+"_"+e.map.to,s={name:i,enums:[],messages:[],fields:[{name:"key",type:e.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:e.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:r+(r?".":"")+i};n[s.id]||(n[s.id]=s,t.messages.push(s)),e.type=i,e.repeated=!0}})),e(i,i.id)}))}(e,"");var f=function(e,t){e.messages.forEach((function(n){t[n.name]=l(n.name,e.id)})),e.enums.forEach((function(e){t[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),t.type=2,t.message=!0,t.name=e.name;var n={};e.fields.forEach((function(e){e.oneof&&(n[e.oneof]||(n[e.oneof]=[]),n[e.oneof].push(e.name))}));var r=e.fields.map((function(t){return l(t.type,e.id)})),a=o(e,r,n),u=s(e,l,r,n,a),c=i(e,l,r);return u.bytes=c.bytes=0,t.buffer=!0,t.encode=u,t.decode=c,t.encodingLength=a,t},l=function(e,i,s){if(t&&t[e])return t[e];if(r[e])return r[e];var o,l,h=(i?i+"."+e:e).split(".").map((function(t,n,r){return r.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||n[t]||u[t]}),null);if(!1===s)return h;if(!h)throw new Error("Could not resolve "+e);return h.values?(o=h,l=Object.keys(o.values||[]).map((function(e){return parseInt(o.values[e].value,10)})),r.make(0,(function e(t,n,r){if(!l.length||-1===l.indexOf(t))throw new Error("Invalid enum value: "+t);return a.encode(t,n,r),e.bytes=a.encode.bytes,n}),(function e(t,n){var r=a.decode(t,n);if(!l.length||-1===l.indexOf(r))throw new Error("Invalid enum value: "+r);return e.bytes=a.decode.bytes,r}),a.encodingLength)):c[h.id]||f(h,c[h.id]={})};return(e.enums||[]).concat((e.messages||[]).map((function(e){return l(e.id)})))}},function(e,t,n){"use strict";var r,i=n(1),s=n(44),o=n(3).Buffer,a=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};t.make=a,t.bytes=(r=function(e){return o.isBuffer(e)?e.length:o.byteLength(e)},a(2,(function e(t,n,s){var a=s,u=r(t);return i.encode(u,n,s),s+=i.encode.bytes,o.isBuffer(t)?t.copy(n,s):n.write(t,s,u),e.bytes=(s+=u)-a,n}),(function e(t,n){var r=n,s=i.decode(t,n);n+=i.decode.bytes;var o=t.slice(n,n+s);return n+=o.length,e.bytes=n-r,o}),(function(e){var t=r(e);return i.encodingLength(t)+t}))),t.string=a(2,(function e(t,n,r){var s=r,a=o.byteLength(t);return i.encode(a,n,r,"utf-8"),r+=i.encode.bytes,n.write(t,r,a),e.bytes=(r+=a)-s,n}),(function e(t,n){var r=n,s=i.decode(t,n);n+=i.decode.bytes;var o=t.toString("utf-8",n,n+s);return e.bytes=(n+=s)-r,o}),(function(e){var t=o.byteLength(e);return i.encodingLength(t)+t})),t.bool=a(0,(function e(t,n,r){return n[r]=t?1:0,e.bytes=1,n}),(function e(t,n){var r=t[n]>0;return e.bytes=1,r}),(function(e){return 1})),t.int32=a(0,(function e(t,n,r){return i.encode(t<0?t+4294967296:t,n,r),e.bytes=i.encode.bytes,n}),(function e(t,n){var r=i.decode(t,n);return e.bytes=i.decode.bytes,r>2147483647?r-4294967296:r}),(function(e){return i.encodingLength(e<0?e+4294967296:e)})),t.int64=a(0,(function e(t,n,r){if(t<0){var s=r+9;for(i.encode(-1*t,n,r),n[r+=i.encode.bytes-1]=128|n[r];r<s-1;)n[++r]=255;n[s]=1,e.bytes=10}else i.encode(t,n,r),e.bytes=i.encode.bytes;return n}),(function e(t,n){var r=i.decode(t,n);if(r>=Math.pow(2,63)){for(var s=9;255===t[n+s-1];)s--;s=s||9;var a=o.allocUnsafe(s);t.copy(a,0,n,n+s),a[s-1]=127&a[s-1],r=-1*i.decode(a,0),e.bytes=10}else e.bytes=i.decode.bytes;return r}),(function(e){return e<0?10:i.encodingLength(e)})),t.sint32=t.sint64=a(0,s.encode,s.decode,s.encodingLength),t.uint32=t.uint64=t.enum=t.varint=a(0,i.encode,i.decode,i.encodingLength),t.fixed64=t.sfixed64=a(1,(function e(t,n,r){return t.copy(n,r),e.bytes=8,n}),(function e(t,n){var r=t.slice(n,n+8);return e.bytes=8,r}),(function(e){return 8})),t.double=a(1,(function e(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n}),(function e(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r}),(function(e){return 8})),t.fixed32=a(5,(function e(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r}),(function(e){return 4})),t.sfixed32=a(5,(function e(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readInt32LE(n);return e.bytes=4,r}),(function(e){return 4})),t.float=a(5,(function e(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readFloatLE(n);return e.bytes=4,r}),(function(e){return 4}))},function(e,t,n){"use strict";e.exports=function e(t,n,o){n=n||[];var a=o=o||0;for(;t>=s;)n[o++]=255&t|r,t/=128;for(;t&i;)n[o++]=255&t|r,t>>>=7;return n[o]=0|t,e.bytes=o-a+1,n};var r=128,i=-128,s=Math.pow(2,31)},function(e,t,n){"use strict";e.exports=function e(t,n){var s,o=0,a=0,u=n=n||0,c=t.length;do{if(u>=c)throw e.bytes=0,new RangeError("Could not decode varint");s=t[u++],o+=a<28?(s&i)<<a:(s&i)*Math.pow(2,a),a+=7}while(s>=r);return e.bytes=u-n,o};var r=128,i=127},function(e,t,n){"use strict";var r=Math.pow(2,7),i=Math.pow(2,14),s=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),u=Math.pow(2,42),c=Math.pow(2,49),f=Math.pow(2,56),l=Math.pow(2,63);e.exports=function(e){return e<r?1:e<i?2:e<s?3:e<o?4:e<a?5:e<u?6:e<c?7:e<f?8:e<l?9:10}},function(e,t,n){"use strict";var r=n(1);t.encode=function e(t,n,i){t=t>=0?2*t:-2*t-1;var s=r.encode(t,n,i);return e.bytes=r.encode.bytes,s},t.decode=function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,1&i?(i+1)/-2:i/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},function(e,t,n){"use strict";var r=n(1),i=n(9).defined;function s(e){return"".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1))}function o(e,t,n,r){if(Object.prototype.hasOwnProperty.call(e,t))return;const i=s(t);Object.defineProperties(e,{[t]:{enumerable:!0,configurable:!0,set:e=>{n=e},get:()=>void 0===n?r:n},["has".concat(i)]:{configurable:!0,value:()=>void 0!==n},["set".concat(i)]:{configurable:!0,value:e=>{n=e}},["get".concat(i)]:{configurable:!0,value:()=>n},["clear".concat(i)]:{configurable:!0,value:()=>{n=void 0,e[t]=void 0}}})}var a=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var i=r.decode(t,n);return n+r.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+e)}},u=function(e){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return"";case"bool":return!1;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return 0;default:return null}},c=function(e,t){if(void 0===t)return t;switch(e.type){case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t,10);default:return t}};e.exports=function(e,t,n){for(var f=[],l={},h=[],p=[],d=0;d<n.length;d++){var b=e.fields[d];l[b.tag]=d;var k=b.options&&b.options.default,g=t(b.type,e.id,!1);p[d]=[k,g&&g.values],e.fields[d].packed=b.repeated&&b.options&&b.options.packed&&"false"!==b.options.packed,b.required&&f.push(b.name),b.oneof&&h.push(b.name)}function m(e,t,n,i,a,u){var c=t.name;if(t.oneof)for(var f=Object.keys(n),l=0;l<f.length;l++)if(h.indexOf(f[l])>-1){const e=s(f[l]);delete n["has".concat(e)],delete n["get".concat(e)],delete n["set".concat(e)],delete n["clear".concat(e)],delete n[f[l]]}let p;if(e.message){var d=r.decode(i,a);a+=r.decode.bytes;var b=e.decode(i,a,a+d);t.map?(p=n[c]||{},p[b.key]=b.value):t.repeated?(p=n[c]||[],p.push(b)):p=b}else t.repeated?(p=n[c]||[],p.push(e.decode(i,a))):p=e.decode(i,a);return o(n,c,p),a+=e.decode.bytes}return function t(s,d,b){if(null==d&&(d=0),null==b&&(b=s.length),!(b<=s.length&&d<=s.length))throw new Error("Decoded message is not valid");for(var k,g=d,y={};;){if(b<=d){var w,v,S="",E=0;for(E=0;E<f.length;E++)if(S=f[E],!i(y[S]))throw new Error("Decoded message is not valid, missing required field: "+S);for(E=0;E<n.length;E++){let t;if(k=e.fields[E],v=p[E][0],w=p[E][1],S=k.name,!Object.prototype.hasOwnProperty.call(y,S)){var _=!1;if(k.oneof)for(var x=Object.keys(y),C=0;C<x.length;C++)if(h.indexOf(x[C])>-1){_=!0;break}_||(w?k.repeated?v=[]:(v=v&&w[v]?w[v].value:w[Object.keys(w)[0]].value,v=parseInt(v||0,10)):(t=u(k),v=c(k,v)),o(y,S,v,t))}}return t.bytes=d-g,y}var A=r.decode(s,d);d+=r.decode.bytes;var B=l[A>>3];if(null!=B){var O=n[B];if((k=e.fields[B]).packed){var T=r.decode(s,d);for(T+=d+=r.decode.bytes;d<T;)d=m(O,k,y,s,d)}else d=m(O,k,y,s,d)}else d=a(7&A,s,d)}}}},function(e,t,n){"use strict";(function(t){var r=n(9).defined,i=n(1);e.exports=function(e,n,s,o,a){for(var u=Object.keys(o),c=s.length,f={},l=0;l<c;l++){f[l]={p:i.encode(e.fields[l].tag<<3|2),h:i.encode(e.fields[l].tag<<3|s[l].type)};var h=e.fields[l];e.fields[l].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed}function p(e,t,n,r,s,o){var a=0;if(!s)for(a=0;a<n.length;a++)e[t++]=n[a];return r.message&&(i.encode(r.encodingLength(o),e,t),t+=i.encode.bytes),r.encode(o,e,t),t+r.encode.bytes}return function n(l,h,d){null==d&&(d=0),null==h&&(h=t.allocUnsafe(a(l)));var b=d,k=Object.keys(l),g=0,m=!1;for(g=0;g<u.length;g++){var y=u[g],w=o[g];if(k.indexOf(w)>-1){if(m)throw new Error("only one of the properties defined in oneof "+y+" can be set");m=!0}}for(g=0;g<c;g++){var v=s[g],S=e.fields[g],E=l[S.name],_=0;if(r(E)){var x,C=f[g].p,A=f[g].h,B=S.packed;if(S.map){var O=Object.keys(E);for(_=0;_<O.length;_++)O[_]={key:O[_],value:E[O[_]]};E=O}if(B){var T=0;for(_=0;_<E.length;_++)Object.prototype.hasOwnProperty.call(E,_)&&(T+=v.encodingLength(E[_]));if(T){for(_=0;_<A.length;_++)h[d++]=C[_];i.encode(T,h,d),d+=i.encode.bytes}}if(S.repeated)for(_=0;_<E.length;_++)x=E[_],r(x)&&(d=p(h,d,A,v,B,x));else d=p(h,d,A,v,B,E)}else if(S.required)throw new Error(S.name+" is required")}return n.bytes=d-b,h}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";var r=n(9).defined,i=n(1);e.exports=function(e,t,n){for(var s=Object.keys(n),o=t.length,a=new Array(o),u=0;u<e.fields.length;u++){a[u]=i.encodingLength(e.fields[u].tag<<3|t[u].type);var c=e.fields[u];e.fields[u].packed=c.repeated&&c.options&&c.options.packed&&"false"!==c.options.packed}return function(u){var c=0,f=0,l=0;for(f=0;f<s.length;f++){var h=s[f],p=n[h],d=!1;for(l=0;l<p.length;l++)if(r(u[p[l]])){if(d)throw new Error("only one of the properties defined in oneof "+h+" can be set");d=!0}}for(f=0;f<o;f++){var b,k=t[f],g=e.fields[f],m=u[g.name],y=a[f];if(r(m)){if(g.map){var w=Object.keys(m);for(l=0;l<w.length;l++)w[l]={key:w[l],value:m[w[l]]};m=w}if(g.packed){var v=0;for(l=0;l<m.length;l++)r(m[l])&&(v+=b=k.encodingLength(m[l]),k.message&&(v+=i.encodingLength(b)));v&&(c+=y+v+i.encodingLength(v))}else if(g.repeated)for(l=0;l<m.length;l++)r(m[l])&&(c+=y+(b=k.encodingLength(m[l]))+(k.message?i.encodingLength(b):0));else c+=y+(b=k.encodingLength(m))+(k.message?i.encodingLength(b):0)}else if(g.required)throw new Error(g.name+" is required")}return c}}},function(e,t,n){"use strict";(function(t){const r=n(17),i=n(20);e.exports=i(class{constructor(e,n){if(!e||!t.isBuffer(e))throw new Error("first argument  must be a buffer");if(!n||!r.isCID(n))throw new Error("second argument must be a CID");this._data=e,this._cid=n}get data(){return this._data}set data(e){throw new Error("Tried to change an immutable block")}get cid(){return this._cid}set cid(e){throw new Error("Tried to change an immutable block")}},{className:"Block",symbolName:"@ipfs/js-ipfs-block/block"})}).call(this,n(0).Buffer)},function(e,t,n){"use strict";var r=n(50);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(e,t,n){"use strict";var r=n(3).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");var t=new Uint8Array(256);t.fill(255);for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);var n=0;if(" "!==e[n]){for(var i=0,s=0;e[n]===a;)i++,n++;for(var c=(e.length-n)*u+1>>>0,f=new Uint8Array(c);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var h=0,p=c-1;(0!==l||h<s)&&-1!==p;p--,h++)l+=o*f[p]>>>0,f[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=h,n++}if(" "!==e[n]){for(var d=c-s;d!==c&&0===f[d];)d++;var b=r.allocUnsafe(i+(c-d));b.fill(0,0,i);for(var k=i;d!==c;)b[k++]=f[d++];return b}}}return{encode:function(t){if(!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,s=0,u=t.length;s!==u&&0===t[s];)s++,n++;for(var f=(u-s)*c+1>>>0,l=new Uint8Array(f);s!==u;){for(var h=t[s],p=0,d=f-1;(0!==h||p<i)&&-1!==d;d--,p++)h+=256*l[d]>>>0,l[d]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");i=p,s++}for(var b=f-i;b!==f&&0===l[b];)b++;for(var k=a.repeat(n);b<f;++b)k+=e.charAt(l[b]);return k},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},function(e,t,n){"use strict";t.names=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"dbl-sha2-256":86,"sha3-224":23,"sha3-256":22,"sha3-384":21,"sha3-512":20,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"murmur3-128":34,"murmur3-32":35,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"Skein256-8":45825,"Skein256-16":45826,"Skein256-24":45827,"Skein256-32":45828,"Skein256-40":45829,"Skein256-48":45830,"Skein256-56":45831,"Skein256-64":45832,"Skein256-72":45833,"Skein256-80":45834,"Skein256-88":45835,"Skein256-96":45836,"Skein256-104":45837,"Skein256-112":45838,"Skein256-120":45839,"Skein256-128":45840,"Skein256-136":45841,"Skein256-144":45842,"Skein256-152":45843,"Skein256-160":45844,"Skein256-168":45845,"Skein256-176":45846,"Skein256-184":45847,"Skein256-192":45848,"Skein256-200":45849,"Skein256-208":45850,"Skein256-216":45851,"Skein256-224":45852,"Skein256-232":45853,"Skein256-240":45854,"Skein256-248":45855,"Skein256-256":45856,"Skein512-8":45857,"Skein512-16":45858,"Skein512-24":45859,"Skein512-32":45860,"Skein512-40":45861,"Skein512-48":45862,"Skein512-56":45863,"Skein512-64":45864,"Skein512-72":45865,"Skein512-80":45866,"Skein512-88":45867,"Skein512-96":45868,"Skein512-104":45869,"Skein512-112":45870,"Skein512-120":45871,"Skein512-128":45872,"Skein512-136":45873,"Skein512-144":45874,"Skein512-152":45875,"Skein512-160":45876,"Skein512-168":45877,"Skein512-176":45878,"Skein512-184":45879,"Skein512-192":45880,"Skein512-200":45881,"Skein512-208":45882,"Skein512-216":45883,"Skein512-224":45884,"Skein512-232":45885,"Skein512-240":45886,"Skein512-248":45887,"Skein512-256":45888,"Skein512-264":45889,"Skein512-272":45890,"Skein512-280":45891,"Skein512-288":45892,"Skein512-296":45893,"Skein512-304":45894,"Skein512-312":45895,"Skein512-320":45896,"Skein512-328":45897,"Skein512-336":45898,"Skein512-344":45899,"Skein512-352":45900,"Skein512-360":45901,"Skein512-368":45902,"Skein512-376":45903,"Skein512-384":45904,"Skein512-392":45905,"Skein512-400":45906,"Skein512-408":45907,"Skein512-416":45908,"Skein512-424":45909,"Skein512-432":45910,"Skein512-440":45911,"Skein512-448":45912,"Skein512-456":45913,"Skein512-464":45914,"Skein512-472":45915,"Skein512-480":45916,"Skein512-488":45917,"Skein512-496":45918,"Skein512-504":45919,"Skein512-512":45920,"Skein1024-8":45921,"Skein1024-16":45922,"Skein1024-24":45923,"Skein1024-32":45924,"Skein1024-40":45925,"Skein1024-48":45926,"Skein1024-56":45927,"Skein1024-64":45928,"Skein1024-72":45929,"Skein1024-80":45930,"Skein1024-88":45931,"Skein1024-96":45932,"Skein1024-104":45933,"Skein1024-112":45934,"Skein1024-120":45935,"Skein1024-128":45936,"Skein1024-136":45937,"Skein1024-144":45938,"Skein1024-152":45939,"Skein1024-160":45940,"Skein1024-168":45941,"Skein1024-176":45942,"Skein1024-184":45943,"Skein1024-192":45944,"Skein1024-200":45945,"Skein1024-208":45946,"Skein1024-216":45947,"Skein1024-224":45948,"Skein1024-232":45949,"Skein1024-240":45950,"Skein1024-248":45951,"Skein1024-256":45952,"Skein1024-264":45953,"Skein1024-272":45954,"Skein1024-280":45955,"Skein1024-288":45956,"Skein1024-296":45957,"Skein1024-304":45958,"Skein1024-312":45959,"Skein1024-320":45960,"Skein1024-328":45961,"Skein1024-336":45962,"Skein1024-344":45963,"Skein1024-352":45964,"Skein1024-360":45965,"Skein1024-368":45966,"Skein1024-376":45967,"Skein1024-384":45968,"Skein1024-392":45969,"Skein1024-400":45970,"Skein1024-408":45971,"Skein1024-416":45972,"Skein1024-424":45973,"Skein1024-432":45974,"Skein1024-440":45975,"Skein1024-448":45976,"Skein1024-456":45977,"Skein1024-464":45978,"Skein1024-472":45979,"Skein1024-480":45980,"Skein1024-488":45981,"Skein1024-496":45982,"Skein1024-504":45983,"Skein1024-512":45984,"Skein1024-520":45985,"Skein1024-528":45986,"Skein1024-536":45987,"Skein1024-544":45988,"Skein1024-552":45989,"Skein1024-560":45990,"Skein1024-568":45991,"Skein1024-576":45992,"Skein1024-584":45993,"Skein1024-592":45994,"Skein1024-600":45995,"Skein1024-608":45996,"Skein1024-616":45997,"Skein1024-624":45998,"Skein1024-632":45999,"Skein1024-640":46e3,"Skein1024-648":46001,"Skein1024-656":46002,"Skein1024-664":46003,"Skein1024-672":46004,"Skein1024-680":46005,"Skein1024-688":46006,"Skein1024-696":46007,"Skein1024-704":46008,"Skein1024-712":46009,"Skein1024-720":46010,"Skein1024-728":46011,"Skein1024-736":46012,"Skein1024-744":46013,"Skein1024-752":46014,"Skein1024-760":46015,"Skein1024-768":46016,"Skein1024-776":46017,"Skein1024-784":46018,"Skein1024-792":46019,"Skein1024-800":46020,"Skein1024-808":46021,"Skein1024-816":46022,"Skein1024-824":46023,"Skein1024-832":46024,"Skein1024-840":46025,"Skein1024-848":46026,"Skein1024-856":46027,"Skein1024-864":46028,"Skein1024-872":46029,"Skein1024-880":46030,"Skein1024-888":46031,"Skein1024-896":46032,"Skein1024-904":46033,"Skein1024-912":46034,"Skein1024-920":46035,"Skein1024-928":46036,"Skein1024-936":46037,"Skein1024-944":46038,"Skein1024-952":46039,"Skein1024-960":46040,"Skein1024-968":46041,"Skein1024-976":46042,"Skein1024-984":46043,"Skein1024-992":46044,"Skein1024-1000":46045,"Skein1024-1008":46046,"Skein1024-1016":46047,"Skein1024-1024":46048}),t.codes=Object.freeze({0:"identity",17:"sha1",18:"sha2-256",19:"sha2-512",86:"dbl-sha2-256",23:"sha3-224",22:"sha3-256",21:"sha3-384",20:"sha3-512",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"Skein256-8",45826:"Skein256-16",45827:"Skein256-24",45828:"Skein256-32",45829:"Skein256-40",45830:"Skein256-48",45831:"Skein256-56",45832:"Skein256-64",45833:"Skein256-72",45834:"Skein256-80",45835:"Skein256-88",45836:"Skein256-96",45837:"Skein256-104",45838:"Skein256-112",45839:"Skein256-120",45840:"Skein256-128",45841:"Skein256-136",45842:"Skein256-144",45843:"Skein256-152",45844:"Skein256-160",45845:"Skein256-168",45846:"Skein256-176",45847:"Skein256-184",45848:"Skein256-192",45849:"Skein256-200",45850:"Skein256-208",45851:"Skein256-216",45852:"Skein256-224",45853:"Skein256-232",45854:"Skein256-240",45855:"Skein256-248",45856:"Skein256-256",45857:"Skein512-8",45858:"Skein512-16",45859:"Skein512-24",45860:"Skein512-32",45861:"Skein512-40",45862:"Skein512-48",45863:"Skein512-56",45864:"Skein512-64",45865:"Skein512-72",45866:"Skein512-80",45867:"Skein512-88",45868:"Skein512-96",45869:"Skein512-104",45870:"Skein512-112",45871:"Skein512-120",45872:"Skein512-128",45873:"Skein512-136",45874:"Skein512-144",45875:"Skein512-152",45876:"Skein512-160",45877:"Skein512-168",45878:"Skein512-176",45879:"Skein512-184",45880:"Skein512-192",45881:"Skein512-200",45882:"Skein512-208",45883:"Skein512-216",45884:"Skein512-224",45885:"Skein512-232",45886:"Skein512-240",45887:"Skein512-248",45888:"Skein512-256",45889:"Skein512-264",45890:"Skein512-272",45891:"Skein512-280",45892:"Skein512-288",45893:"Skein512-296",45894:"Skein512-304",45895:"Skein512-312",45896:"Skein512-320",45897:"Skein512-328",45898:"Skein512-336",45899:"Skein512-344",45900:"Skein512-352",45901:"Skein512-360",45902:"Skein512-368",45903:"Skein512-376",45904:"Skein512-384",45905:"Skein512-392",45906:"Skein512-400",45907:"Skein512-408",45908:"Skein512-416",45909:"Skein512-424",45910:"Skein512-432",45911:"Skein512-440",45912:"Skein512-448",45913:"Skein512-456",45914:"Skein512-464",45915:"Skein512-472",45916:"Skein512-480",45917:"Skein512-488",45918:"Skein512-496",45919:"Skein512-504",45920:"Skein512-512",45921:"Skein1024-8",45922:"Skein1024-16",45923:"Skein1024-24",45924:"Skein1024-32",45925:"Skein1024-40",45926:"Skein1024-48",45927:"Skein1024-56",45928:"Skein1024-64",45929:"Skein1024-72",45930:"Skein1024-80",45931:"Skein1024-88",45932:"Skein1024-96",45933:"Skein1024-104",45934:"Skein1024-112",45935:"Skein1024-120",45936:"Skein1024-128",45937:"Skein1024-136",45938:"Skein1024-144",45939:"Skein1024-152",45940:"Skein1024-160",45941:"Skein1024-168",45942:"Skein1024-176",45943:"Skein1024-184",45944:"Skein1024-192",45945:"Skein1024-200",45946:"Skein1024-208",45947:"Skein1024-216",45948:"Skein1024-224",45949:"Skein1024-232",45950:"Skein1024-240",45951:"Skein1024-248",45952:"Skein1024-256",45953:"Skein1024-264",45954:"Skein1024-272",45955:"Skein1024-280",45956:"Skein1024-288",45957:"Skein1024-296",45958:"Skein1024-304",45959:"Skein1024-312",45960:"Skein1024-320",45961:"Skein1024-328",45962:"Skein1024-336",45963:"Skein1024-344",45964:"Skein1024-352",45965:"Skein1024-360",45966:"Skein1024-368",45967:"Skein1024-376",45968:"Skein1024-384",45969:"Skein1024-392",45970:"Skein1024-400",45971:"Skein1024-408",45972:"Skein1024-416",45973:"Skein1024-424",45974:"Skein1024-432",45975:"Skein1024-440",45976:"Skein1024-448",45977:"Skein1024-456",45978:"Skein1024-464",45979:"Skein1024-472",45980:"Skein1024-480",45981:"Skein1024-488",45982:"Skein1024-496",45983:"Skein1024-504",45984:"Skein1024-512",45985:"Skein1024-520",45986:"Skein1024-528",45987:"Skein1024-536",45988:"Skein1024-544",45989:"Skein1024-552",45990:"Skein1024-560",45991:"Skein1024-568",45992:"Skein1024-576",45993:"Skein1024-584",45994:"Skein1024-592",45995:"Skein1024-600",45996:"Skein1024-608",45997:"Skein1024-616",45998:"Skein1024-624",45999:"Skein1024-632",46e3:"Skein1024-640",46001:"Skein1024-648",46002:"Skein1024-656",46003:"Skein1024-664",46004:"Skein1024-672",46005:"Skein1024-680",46006:"Skein1024-688",46007:"Skein1024-696",46008:"Skein1024-704",46009:"Skein1024-712",46010:"Skein1024-720",46011:"Skein1024-728",46012:"Skein1024-736",46013:"Skein1024-744",46014:"Skein1024-752",46015:"Skein1024-760",46016:"Skein1024-768",46017:"Skein1024-776",46018:"Skein1024-784",46019:"Skein1024-792",46020:"Skein1024-800",46021:"Skein1024-808",46022:"Skein1024-816",46023:"Skein1024-824",46024:"Skein1024-832",46025:"Skein1024-840",46026:"Skein1024-848",46027:"Skein1024-856",46028:"Skein1024-864",46029:"Skein1024-872",46030:"Skein1024-880",46031:"Skein1024-888",46032:"Skein1024-896",46033:"Skein1024-904",46034:"Skein1024-912",46035:"Skein1024-920",46036:"Skein1024-928",46037:"Skein1024-936",46038:"Skein1024-944",46039:"Skein1024-952",46040:"Skein1024-960",46041:"Skein1024-968",46042:"Skein1024-976",46043:"Skein1024-984",46044:"Skein1024-992",46045:"Skein1024-1000",46046:"Skein1024-1008",46047:"Skein1024-1016",46048:"Skein1024-1024"}),t.defaultLengths=Object.freeze({17:20,18:32,19:64,86:32,23:28,22:32,21:48,20:64,24:32,25:64,26:28,27:32,28:48,29:64,34:32,45569:1,45570:2,45571:3,45572:4,45573:5,45574:6,45575:7,45576:8,45577:9,45578:10,45579:11,45580:12,45581:13,45582:14,45583:15,45584:16,45585:17,45586:18,45587:19,45588:20,45589:21,45590:22,45591:23,45592:24,45593:25,45594:26,45595:27,45596:28,45597:29,45598:30,45599:31,45600:32,45601:33,45602:34,45603:35,45604:36,45605:37,45606:38,45607:39,45608:40,45609:41,45610:42,45611:43,45612:44,45613:45,45614:46,45615:47,45616:48,45617:49,45618:50,45619:51,45620:52,45621:53,45622:54,45623:55,45624:56,45625:57,45626:58,45627:59,45628:60,45629:61,45630:62,45631:63,45632:64,45633:1,45634:2,45635:3,45636:4,45637:5,45638:6,45639:7,45640:8,45641:9,45642:10,45643:11,45644:12,45645:13,45646:14,45647:15,45648:16,45649:17,45650:18,45651:19,45652:20,45653:21,45654:22,45655:23,45656:24,45657:25,45658:26,45659:27,45660:28,45661:29,45662:30,45663:31,45664:32,45825:1,45826:2,45827:3,45828:4,45829:5,45830:6,45831:7,45832:8,45833:9,45834:10,45835:11,45836:12,45837:13,45838:14,45839:15,45840:16,45841:17,45842:18,45843:19,45844:20,45845:21,45846:22,45847:23,45848:24,45849:25,45850:26,45851:27,45852:28,45853:29,45854:30,45855:31,45856:32,45857:1,45858:2,45859:3,45860:4,45861:5,45862:6,45863:7,45864:8,45865:9,45866:10,45867:11,45868:12,45869:13,45870:14,45871:15,45872:16,45873:17,45874:18,45875:19,45876:20,45877:21,45878:22,45879:23,45880:24,45881:25,45882:26,45883:27,45884:28,45885:29,45886:30,45887:31,45888:32,45889:33,45890:34,45891:35,45892:36,45893:37,45894:38,45895:39,45896:40,45897:41,45898:42,45899:43,45900:44,45901:45,45902:46,45903:47,45904:48,45905:49,45906:50,45907:51,45908:52,45909:53,45910:54,45911:55,45912:56,45913:57,45914:58,45915:59,45916:60,45917:61,45918:62,45919:63,45920:64,45921:1,45922:2,45923:3,45924:4,45925:5,45926:6,45927:7,45928:8,45929:9,45930:10,45931:11,45932:12,45933:13,45934:14,45935:15,45936:16,45937:17,45938:18,45939:19,45940:20,45941:21,45942:22,45943:23,45944:24,45945:25,45946:26,45947:27,45948:28,45949:29,45950:30,45951:31,45952:32,45953:33,45954:34,45955:35,45956:36,45957:37,45958:38,45959:39,45960:40,45961:41,45962:42,45963:43,45964:44,45965:45,45966:46,45967:47,45968:48,45969:49,45970:50,45971:51,45972:52,45973:53,45974:54,45975:55,45976:56,45977:57,45978:58,45979:59,45980:60,45981:61,45982:62,45983:63,45984:64,45985:65,45986:66,45987:67,45988:68,45989:69,45990:70,45991:71,45992:72,45993:73,45994:74,45995:75,45996:76,45997:77,45998:78,45999:79,46e3:80,46001:81,46002:82,46003:83,46004:84,46005:85,46006:86,46007:87,46008:88,46009:89,46010:90,46011:91,46012:92,46013:93,46014:94,46015:95,46016:96,46017:97,46018:98,46019:99,46020:100,46021:101,46022:102,46023:103,46024:104,46025:105,46026:106,46027:107,46028:108,46029:109,46030:110,46031:111,46032:112,46033:113,46034:114,46035:115,46036:116,46037:117,46038:118,46039:119,46040:120,46041:121,46042:122,46043:123,46044:124,46045:125,46046:126,46047:127,46048:128})},function(e,t,n){"use strict";(function(r){const i=n(53);(t=e.exports=o).encode=function(e,t){const n=a(e);return o(n.name,r.from(n.encode(t)))},t.decode=function(e){r.isBuffer(e)&&(e=e.toString());const t=e.substring(0,1);"string"==typeof(e=e.substring(1,e.length))&&(e=r.from(e));const n=a(t);return r.from(n.decode(e.toString()))},t.isEncoded=function(e){r.isBuffer(e)&&(e=e.toString());if("[object String]"!==Object.prototype.toString.call(e))return!1;const t=e.substring(0,1);try{return a(t).name}catch(n){return!1}},t.names=Object.freeze(Object.keys(i.names)),t.codes=Object.freeze(Object.keys(i.codes));const s=new Error("Unsupported encoding");function o(e,t){if(!t)throw new Error("requires an encoded buffer");const n=a(e),i=r.from(n.code);return function(e,t){a(e).decode(t.toString())}(n.name,t),r.concat([i,t])}function a(e){let t;if(i.names[e])t=i.names[e];else{if(!i.codes[e])throw s;t=i.codes[e]}if(!t.isImplemented())throw new Error("Base "+e+" is not implemented yet");return t}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";const r=n(54),i=n(55),s=n(56),o=n(57),a=n(58),u=[["base1","1","","1"],["base2","0",i,"01"],["base8","7",i,"01234567"],["base10","9",i,"0123456789"],["base16","f",s,"0123456789abcdef"],["base32","b",o,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",o,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",o,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",o,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",o,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",i,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",i,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],c=u.reduce((e,t)=>(e[t[0]]=new r(t[0],t[1],t[2],t[3]),e),{}),f=u.reduce((e,t)=>(e[t[1]]=c[t[0]],e),{});e.exports={names:c,codes:f}},function(e,t,n){"use strict";e.exports=class{constructor(e,t,n,r){this.name=e,this.code=t,this.alphabet=r,n&&r&&(this.engine=n(r))}encode(e){return this.engine.encode(e)}decode(e){return this.engine.decode(e)}isImplemented(){return this.engine}}},function(e,t,n){"use strict";var r=n(3).Buffer;e.exports=function(e){for(var t={},n=e.length,i=e.charAt(0),s=0;s<e.length;s++){var o=e.charAt(s);if(void 0!==t[o])throw new TypeError(o+" is ambiguous");t[o]=s}function a(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return r.allocUnsafe(0);for(var s=[0],o=0;o<e.length;o++){var a=t[e[o]];if(void 0===a)return;for(var u=0,c=a;u<s.length;++u)c+=s[u]*n,s[u]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var f=0;e[f]===i&&f<e.length-1;++f)s.push(0);return r.from(s.reverse())}return{encode:function(t){if(0===t.length)return"";for(var r=[0],s=0;s<t.length;++s){for(var o=0,a=t[s];o<r.length;++o)a+=r[o]<<8,r[o]=a%n,a=a/n|0;for(;a>0;)r.push(a%n),a=a/n|0}for(var u="",c=0;0===t[c]&&c<t.length-1;++c)u+=i;for(var f=r.length-1;f>=0;--f)u+=e[r[f]];return u},decodeUnsafe:a,decode:function(e){var t=a(e);if(t)return t;throw new Error("Non-base"+n+" character")}}}},function(e,t,n){"use strict";(function(t){e.exports=function(e){return{encode:e=>"string"==typeof e?t.from(e).toString("hex"):e.toString("hex"),decode(n){for(let t of n)if(e.indexOf(t)<0)throw new Error("invalid base16 character");return t.from(n,"hex")}}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";(function(t){function n(e,t){let n=e.byteLength,r=new Uint8Array(e),i=t.indexOf("=")===t.length-1;i&&(t=t.substring(0,t.length-2));let s=0,o=0,a="";for(let u=0;u<n;u++)for(o=o<<8|r[u],s+=8;s>=5;)a+=t[o>>>s-5&31],s-=5;if(s>0&&(a+=t[o<<5-s&31]),i)for(;a.length%8!=0;)a+="=";return a}e.exports=function(e){return{encode:r=>n("string"==typeof r?t.from(r):r,e),decode(t){for(let n of t)if(e.indexOf(n)<0)throw new Error("invalid base32 character");return function(e,t){let n=(e=e.replace(new RegExp("=","g"),"")).length,r=0,i=0,s=0,o=new Uint8Array(5*n/8|0);for(let a=0;a<n;a++)i=i<<5|t.indexOf(e[a]),r+=5,r>=8&&(o[s++]=i>>>r-8&255,r-=8);return o.buffer}(t,e)}}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";(function(t){e.exports=function(e){const n=e.indexOf("=")>-1,r=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode(e){let i="";i="string"==typeof e?t.from(e).toString("base64"):e.toString("base64"),r&&(i=i.replace(/\+/g,"-").replace(/\//g,"_"));const s=i.indexOf("=");return s>0&&!n&&(i=i.substring(0,s)),i},decode(n){for(let t of n)if(e.indexOf(t)<0)throw new Error("invalid base64 character");return t.from(n,"base64")}}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";const r=n(4),i=new Map;for(const s in r){const e=r[s];i.set(e,s)}e.exports=Object.freeze(i)},function(e,t,n){"use strict";const r=n(4),i=n(19).varintEncode,s={};for(const o in r){const e=r[o];s[o]=i(e)}e.exports=Object.freeze(s)},function(e,t,n){"use strict";const r=n(4),i={};for(const[s,o]of Object.entries(r))i[s.toUpperCase().replace(/-/g,"_")]=o;e.exports=Object.freeze(i)},function(e,t,n){"use strict";const r=n(4),i={};for(const[s,o]of Object.entries(r))void 0===i[o]&&(i[o]=s);e.exports=Object.freeze(i)},function(e,t,n){"use strict";(function(t){const r=n(10);var i={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!t.isBuffer(e.multihash))return"multihash must be a Buffer";try{r.validate(e.multihash)}catch(n){let e=n.message;return e||(e="Multihash validation failed"),e}}};e.exports=i}).call(this,n(0).Buffer)},function(e,t,n){"use strict";(function(t){const r=n(1);e.exports=e=>{if(!t.isBuffer(e))throw new Error("arg needs to be a buffer");let n=[];for(;e.length>0;){const t=r.decode(e);n.push(t),e=e.slice(r.decode.bytes)}return n}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";const{Buffer:r}=n(0),i=n(66),s=n(10),o=n(67);async function a(e,t,n){const r=await a.digest(e,t,n);return s.encode(r,t,n)}a.Buffer=r,a.multihash=s,a.digest=async(e,t,n)=>{const r=a.createHash(t),i=await r(e);return n?i.slice(0,n):i},a.createHash=function(e){if(!e)throw i(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=s.coerceCode(e),!a.functions[e])throw i(new Error("multihash function '".concat(e,"' not yet supported")),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return a.functions[e]},a.functions={0:o.identity,17:o.sha1,18:o.sha2256,19:o.sha2512,20:o.sha3512,21:o.sha3384,22:o.sha3256,23:o.sha3224,24:o.shake128,25:o.shake256,26:o.keccak224,27:o.keccak256,28:o.keccak384,29:o.keccak512,34:o.murmur3128,35:o.murmur332,86:o.dblSha2256},o.addBlake(a.functions),a.validate=async(e,t)=>{const n=await a(e,s.decode(t).name);return 0===r.compare(t,n)},e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n){var r;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?n=t:null!=t&&(e.code=t),n)for(r in n)e[r]=n[r];return e}},function(e,t,n){"use strict";const{Buffer:r}=n(0),i=n(68),s=n(70),o=n(72),{fromNumberTo32BitBuf:a}=n(73),u=e=>async t=>{switch(e){case"sha3-224":return r.from(i.sha3_224.arrayBuffer(t));case"sha3-256":return r.from(i.sha3_256.arrayBuffer(t));case"sha3-384":return r.from(i.sha3_384.arrayBuffer(t));case"sha3-512":return r.from(i.sha3_512.arrayBuffer(t));case"shake-128":return r.from(i.shake128.create(128).update(t).arrayBuffer());case"shake-256":return r.from(i.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return r.from(i.keccak224.arrayBuffer(t));case"keccak-256":return r.from(i.keccak256.arrayBuffer(t));case"keccak-384":return r.from(i.keccak384.arrayBuffer(t));case"keccak-512":return r.from(i.keccak512.arrayBuffer(t));case"murmur3-128":return r.from(s.x64.hash128(t),"hex");case"murmur3-32":return a(s.x86.hash32(t));default:throw new TypeError("".concat(e," is not a supported algorithm"))}};e.exports={identity:e=>r.from(e),sha1:o("sha1"),sha2256:o("sha2-256"),sha2512:o("sha2-512"),dblSha2256:o("dbl-sha2-256"),sha3224:u("sha3-224"),sha3256:u("sha3-256"),sha3384:u("sha3-384"),sha3512:u("sha3-512"),shake128:u("shake-128"),shake256:u("shake-256"),keccak224:u("keccak-224"),keccak256:u("keccak-256"),keccak384:u("keccak-384"),keccak512:u("keccak-512"),murmur3128:u("murmur3-128"),murmur332:u("murmur3-32"),addBlake:n(74)}},function(e,t,n){"use strict";(function(r,i){var s;!function(){var o="input is invalid type",a="object"==typeof window,u=a?window:{};u.JS_SHA3_NO_WINDOW&&(a=!1);var c=!a&&"object"==typeof self;!u.JS_SHA3_NO_NODE_JS&&"object"==typeof r&&r.versions&&r.versions.node?u=i:c&&(u=self);var f=!u.JS_SHA3_NO_COMMON_JS&&"object"==typeof e&&e.exports,l=n(69),h=!u.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,p="0123456789abcdef".split(""),d=[4,1024,262144,67108864],b=[0,8,16,24],k=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};!u.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!h||!u.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var v=function(e,t,n){return function(r){return new U(e,t,e).update(r)[n]()}},S=function(e,t,n){return function(r,i){return new U(e,t,i).update(r)[n]()}},E=function(e,t,n){return function(t,r,i,s){return B["cshake"+e].update(t,r,i,s)[n]()}},_=function(e,t,n){return function(t,r,i,s){return B["kmac"+e].update(t,r,i,s)[n]()}},x=function(e,t,n,r){for(var i=0;i<y.length;++i){var s=y[i];e[s]=t(n,r,s)}return e},C=function(e,t){var n=v(e,t,"hex");return n.create=function(){return new U(e,t,e)},n.update=function(e){return n.create().update(e)},x(n,v,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:C},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:C},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var n=S(e,t,"hex");return n.create=function(n){return new U(e,t,n)},n.update=function(e,t){return n.create(t).update(e)},x(n,S,e,t)}},{name:"cshake",padding:d,bits:m,createMethod:function(e,t){var n=w[e],r=E(e,0,"hex");return r.create=function(r,i,s){return i||s?new U(e,t,r).bytepad([i,s],n):B["shake"+e].create(r)},r.update=function(e,t,n,i){return r.create(t,n,i).update(e)},x(r,E,e,t)}},{name:"kmac",padding:d,bits:m,createMethod:function(e,t){var n=w[e],r=_(e,0,"hex");return r.create=function(r,i,s){return new N(e,t,i).bytepad(["KMAC",s],n).bytepad([r],n)},r.update=function(e,t,n,i){return r.create(e,n,i).update(t)},x(r,_,e,t)}}],B={},O=[],T=0;T<A.length;++T)for(var P=A[T],R=P.bits,L=0;L<R.length;++L){var I=P.name+"_"+R[L];if(O.push(I),B[I]=P.createMethod(R[L],P.padding),"sha3"!==P.name){var M=P.name+R[L];O.push(M),B[M]=B[I]}}function U(e,t,n){this.blocks=[],this.s=[],this.padding=t,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function N(e,t,n){U.call(this,e,t,n)}U.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(o);if(null===e)throw new Error(o);if(h&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||h&&ArrayBuffer.isView(e)))throw new Error(o);t=!0}for(var r,i,s=this.blocks,a=this.byteCount,u=e.length,c=this.blockCount,f=0,l=this.s;f<u;){if(this.reset)for(this.reset=!1,s[0]=this.block,r=1;r<c+1;++r)s[r]=0;if(t)for(r=this.start;f<u&&r<a;++f)s[r>>2]|=e[f]<<b[3&r++];else for(r=this.start;f<u&&r<a;++f)(i=e.charCodeAt(f))<128?s[r>>2]|=i<<b[3&r++]:i<2048?(s[r>>2]|=(192|i>>6)<<b[3&r++],s[r>>2]|=(128|63&i)<<b[3&r++]):i<55296||i>=57344?(s[r>>2]|=(224|i>>12)<<b[3&r++],s[r>>2]|=(128|i>>6&63)<<b[3&r++],s[r>>2]|=(128|63&i)<<b[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++f)),s[r>>2]|=(240|i>>18)<<b[3&r++],s[r>>2]|=(128|i>>12&63)<<b[3&r++],s[r>>2]|=(128|i>>6&63)<<b[3&r++],s[r>>2]|=(128|63&i)<<b[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=s[c],r=0;r<c;++r)l[r]^=s[r];j(l),this.reset=!0}else this.start=r}return this},U.prototype.encode=function(e,t){var n=255&e,r=1,i=[n];for(n=255&(e>>=8);n>0;)i.unshift(n),n=255&(e>>=8),++r;return t?i.push(r):i.unshift(r),this.update(i),i.length},U.prototype.encodeString=function(e){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(o);if(null===e)throw new Error(o);if(h&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||h&&ArrayBuffer.isView(e)))throw new Error(o);t=!0}var r=0,i=e.length;if(t)r=i;else for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);a<128?r+=1:a<2048?r+=2:a<55296||a>=57344?r+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),r+=4)}return r+=this.encode(8*r),this.update(e),r},U.prototype.bytepad=function(e,t){for(var n=this.encode(t),r=0;r<e.length;++r)n+=this.encodeString(e[r]);var i=t-n%t,s=[];return s.length=i,this.update(s),this},U.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,n=this.blockCount,r=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[n],t=1;t<n+1;++t)e[t]=0;for(e[n-1]|=2147483648,t=0;t<n;++t)r[t]^=e[t];j(r)}},U.prototype.toString=U.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";o<r;){for(s=0;s<t&&o<r;++s,++o)e=n[s],a+=p[e>>4&15]+p[15&e]+p[e>>12&15]+p[e>>8&15]+p[e>>20&15]+p[e>>16&15]+p[e>>28&15]+p[e>>24&15];o%t==0&&(j(n),s=0)}return i&&(e=n[s],a+=p[e>>4&15]+p[15&e],i>1&&(a+=p[e>>12&15]+p[e>>8&15]),i>2&&(a+=p[e>>20&15]+p[e>>16&15])),a},U.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(e);o<r;){for(s=0;s<t&&o<r;++s,++o)u[o]=n[s];o%t==0&&j(n)}return i&&(u[s]=n[s],e=e.slice(0,a)),e},U.prototype.buffer=U.prototype.arrayBuffer,U.prototype.digest=U.prototype.array=function(){this.finalize();for(var e,t,n=this.blockCount,r=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,u=[];a<i;){for(o=0;o<n&&a<i;++o,++a)e=a<<2,t=r[o],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%n==0&&j(r)}return s&&(e=a<<2,t=r[o],u[e]=255&t,s>1&&(u[e+1]=t>>8&255),s>2&&(u[e+2]=t>>16&255)),u},N.prototype=new U,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),U.prototype.finalize.call(this)};var j=function(e){var t,n,r,i,s,o,a,u,c,f,l,h,p,d,b,g,m,y,w,v,S,E,_,x,C,A,B,O,T,P,R,L,I,M,U,N,j,F,D,z,q,Y,H,V,W,G,J,$,Q,Z,X,K,ee,te,ne,re,ie,se,oe,ae,ue,ce,fe;for(r=0;r<48;r+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=i^(u<<1|c>>>31),n=s^(c<<1|u>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=o^(f<<1|l>>>31),n=a^(l<<1|f>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=u^(h<<1|p>>>31),n=c^(p<<1|h>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=f^(i<<1|s>>>31),n=l^(s<<1|i>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,d=e[0],b=e[1],G=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,T=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,Y=e[40]<<18|e[41]>>>14,H=e[41]<<18|e[40]>>>14,M=e[2]<<1|e[3]>>>31,U=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,$=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,N=e[14]<<6|e[15]>>>26,j=e[15]<<6|e[14]>>>26,y=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Z=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,L=e[45]<<29|e[44]>>>3,I=e[44]<<29|e[45]>>>3,x=e[6]<<28|e[7]>>>4,C=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,D=e[27]<<25|e[26]>>>7,v=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,K=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,B=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,_=e[49]<<14|e[48]>>>18,e[0]=d^~g&y,e[1]=b^~m&w,e[10]=x^~A&O,e[11]=C^~B&T,e[20]=M^~N&F,e[21]=U^~j&D,e[30]=V^~G&$,e[31]=W^~J&Q,e[40]=te^~re&se,e[41]=ne^~ie&oe,e[2]=g^~y&v,e[3]=m^~w&S,e[12]=A^~O&P,e[13]=B^~T&R,e[22]=N^~F&z,e[23]=j^~D&q,e[32]=G^~$&Z,e[33]=J^~Q&X,e[42]=re^~se&ae,e[43]=ie^~oe&ue,e[4]=y^~v&E,e[5]=w^~S&_,e[14]=O^~P&L,e[15]=T^~R&I,e[24]=F^~z&Y,e[25]=D^~q&H,e[34]=$^~Z&K,e[35]=Q^~X&ee,e[44]=se^~ae&ce,e[45]=oe^~ue&fe,e[6]=v^~E&d,e[7]=S^~_&b,e[16]=P^~L&x,e[17]=R^~I&C,e[26]=z^~Y&M,e[27]=q^~H&U,e[36]=Z^~K&V,e[37]=X^~ee&W,e[46]=ae^~ce&te,e[47]=ue^~fe&ne,e[8]=E^~d&g,e[9]=_^~b&m,e[18]=L^~x&A,e[19]=I^~C&B,e[28]=Y^~M&N,e[29]=H^~U&j,e[38]=K^~V&G,e[39]=ee^~W&J,e[48]=ce^~te&re,e[49]=fe^~ne&ie,e[0]^=k[r],e[1]^=k[r+1]};if(f)e.exports=B;else{for(T=0;T<O.length;++T)u[O[T]]=B[O[T]];l&&(void 0===(s=function(){return B}.call(t,n,t,e))||(e.exports=s))}}()}).call(this,n(21),n(16))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";e.exports=n(71)},function(e,t,n){"use strict";!function(n,r){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function u(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function f(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=p(e,[0,e[0]>>>1]),e=p(e=f(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=p(e=f(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var n=e.length%4,r=e.length-n,c=t,f=0,l=3432918353,h=461845907,p=0;p<r;p+=4)f=o(f=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,l),f=o(f=a(f,15),h),c=o(c=a(c^=f,13),5)+3864292196;switch(f=0,n){case 3:f^=e[p+2]<<16;case 2:f^=e[p+1]<<8;case 1:f=o(f^=e[p],l),c^=f=o(f=a(f,15),h)}return(c=u(c^=e.length))>>>0}},i.x86.hash128=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var n=e.length%16,r=e.length-n,c=t,f=t,l=t,h=t,p=0,d=0,b=0,k=0,g=597399067,m=2869860233,y=951274213,w=2716044179,v=0;v<r;v+=16)p=e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24,d=e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24,b=e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24,k=e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24,p=a(p=o(p,g),15),c=a(c^=p=o(p,m),19),c=o(c+=f,5)+1444728091,d=a(d=o(d,m),16),f=a(f^=d=o(d,y),17),f=o(f+=l,5)+197830471,b=a(b=o(b,y),17),l=a(l^=b=o(b,w),15),l=o(l+=h,5)+2530024501,k=a(k=o(k,w),18),h=a(h^=k=o(k,g),13),h=o(h+=c,5)+850148119;switch(p=0,d=0,b=0,k=0,n){case 15:k^=e[v+14]<<16;case 14:k^=e[v+13]<<8;case 13:k=o(k^=e[v+12],w),h^=k=o(k=a(k,18),g);case 12:b^=e[v+11]<<24;case 11:b^=e[v+10]<<16;case 10:b^=e[v+9]<<8;case 9:b=o(b^=e[v+8],y),l^=b=o(b=a(b,17),w);case 8:d^=e[v+7]<<24;case 7:d^=e[v+6]<<16;case 6:d^=e[v+5]<<8;case 5:d=o(d^=e[v+4],m),f^=d=o(d=a(d,16),y);case 4:p^=e[v+3]<<24;case 3:p^=e[v+2]<<16;case 2:p^=e[v+1]<<8;case 1:p=o(p^=e[v],g),c^=p=o(p=a(p,15),m)}return c^=e.length,c+=f^=e.length,c+=l^=e.length,f+=c+=h^=e.length,l+=c,h+=c,c=u(c),c+=f=u(f),c+=l=u(l),f+=c+=h=u(h),l+=c,h+=c,("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)}},i.x64.hash128=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var n=e.length%16,r=e.length-n,o=[0,t],a=[0,t],u=[0,0],b=[0,0],k=[2277735313,289559509],g=[1291169091,658871167],m=0;m<r;m+=16)u=[e[m+4]|e[m+5]<<8|e[m+6]<<16|e[m+7]<<24,e[m]|e[m+1]<<8|e[m+2]<<16|e[m+3]<<24],b=[e[m+12]|e[m+13]<<8|e[m+14]<<16|e[m+15]<<24,e[m+8]|e[m+9]<<8|e[m+10]<<16|e[m+11]<<24],u=l(u=f(u,k),31),o=c(o=l(o=p(o,u=f(u,g)),27),a),o=c(f(o,[0,5]),[0,1390208809]),b=l(b=f(b,g),33),a=c(a=l(a=p(a,b=f(b,k)),31),o),a=c(f(a,[0,5]),[0,944331445]);switch(u=[0,0],b=[0,0],n){case 15:b=p(b,h([0,e[m+14]],48));case 14:b=p(b,h([0,e[m+13]],40));case 13:b=p(b,h([0,e[m+12]],32));case 12:b=p(b,h([0,e[m+11]],24));case 11:b=p(b,h([0,e[m+10]],16));case 10:b=p(b,h([0,e[m+9]],8));case 9:b=f(b=p(b,[0,e[m+8]]),g),a=p(a,b=f(b=l(b,33),k));case 8:u=p(u,h([0,e[m+7]],56));case 7:u=p(u,h([0,e[m+6]],48));case 6:u=p(u,h([0,e[m+5]],40));case 5:u=p(u,h([0,e[m+4]],32));case 4:u=p(u,h([0,e[m+3]],24));case 3:u=p(u,h([0,e[m+2]],16));case 2:u=p(u,h([0,e[m+1]],8));case 1:u=f(u=p(u,[0,e[m]]),k),o=p(o,u=f(u=l(u,31),g))}return o=c(o=p(o,[0,e.length]),a=p(a,[0,e.length])),a=c(a,o),o=c(o=d(o),a=d(a)),a=c(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}},e.exports&&(t=e.exports=i),t.murmurHash3=i}()},function(e,t,n){"use strict";const{Buffer:r}=n(0),i=self.crypto||self.msCrypto;e.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return r.from(await i.subtle.digest({name:"SHA-1"},t));case"sha2-256":return r.from(await i.subtle.digest({name:"SHA-256"},t));case"sha2-512":return r.from(await i.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await i.subtle.digest({name:"SHA-256"},t);return r.from(await i.subtle.digest({name:"SHA-256"},e))}default:throw new Error("".concat(e," is not a supported algorithm"))}}}},function(e,t,n){"use strict";const{Buffer:r}=n(0);e.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return r.from(t)}}},function(e,t,n){"use strict";const{Buffer:r}=n(0),i=n(75),s={init:i.blake2bInit,update:i.blake2bUpdate,digest:i.blake2bFinal},o={init:i.blake2sInit,update:i.blake2sUpdate,digest:i.blake2sFinal},a=(e,t)=>async n=>{const i=t.init(e,null);return t.update(i,n),r.from(t.digest(i))};e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}},function(e,t,n){"use strict";var r=n(76),i=n(77);e.exports={blake2b:r.blake2b,blake2bHex:r.blake2bHex,blake2bInit:r.blake2bInit,blake2bUpdate:r.blake2bUpdate,blake2bFinal:r.blake2bFinal,blake2s:i.blake2s,blake2sHex:i.blake2sHex,blake2sInit:i.blake2sInit,blake2sUpdate:i.blake2sUpdate,blake2sFinal:i.blake2sFinal}},function(e,t,n){"use strict";var r=n(22);function i(e,t,n){var r=e[t]+e[n],i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function s(e,t,n,r){var i=e[t]+n;n<0&&(i+=4294967296);var s=e[t+1]+r;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,n,r,o,a){var u=l[o],c=l[o+1],h=l[a],p=l[a+1];i(f,e,t),s(f,e,u,c);var d=f[r]^f[e],b=f[r+1]^f[e+1];f[r]=b,f[r+1]=d,i(f,n,r),d=f[t]^f[n],b=f[t+1]^f[n+1],f[t]=d>>>24^b<<8,f[t+1]=b>>>24^d<<8,i(f,e,t),s(f,e,h,p),d=f[r]^f[e],b=f[r+1]^f[e+1],f[r]=d>>>16^b<<16,f[r+1]=b>>>16^d<<16,i(f,n,r),d=f[t]^f[n],b=f[t+1]^f[n+1],f[t]=b>>>31^d<<1,f[t+1]=d>>>31^b<<1}var u=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),f=new Uint32Array(32),l=new Uint32Array(32);function h(e,t){var n=0;for(n=0;n<16;n++)f[n]=e.h[n],f[n+16]=u[n];for(f[24]=f[24]^e.t,f[25]=f[25]^e.t/4294967296,t&&(f[28]=~f[28],f[29]=~f[29]),n=0;n<32;n++)l[n]=o(e.b,4*n);for(n=0;n<12;n++)a(0,8,16,24,c[16*n+0],c[16*n+1]),a(2,10,18,26,c[16*n+2],c[16*n+3]),a(4,12,20,28,c[16*n+4],c[16*n+5]),a(6,14,22,30,c[16*n+6],c[16*n+7]),a(0,10,20,30,c[16*n+8],c[16*n+9]),a(2,12,22,24,c[16*n+10],c[16*n+11]),a(4,14,16,26,c[16*n+12],c[16*n+13]),a(6,8,18,28,c[16*n+14],c[16*n+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^f[n]^f[n+16]}function p(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},r=0;r<16;r++)n.h[r]=u[r];var i=t?t.length:0;return n.h[0]^=16842752^i<<8^e,t&&(d(n,t),n.c=128),n}function d(e,t){for(var n=0;n<t.length;n++)128===e.c&&(e.t+=e.c,h(e,!1),e.c=0),e.b[e.c++]=t[n]}function b(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;h(e,!0);for(var t=new Uint8Array(e.outlen),n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n);return t}function k(e,t,n){n=n||64,e=r.normalizeInput(e);var i=p(n,t);return d(i,e),b(i)}e.exports={blake2b:k,blake2bHex:function(e,t,n){var i=k(e,t,n);return r.toHex(i)},blake2bInit:p,blake2bUpdate:d,blake2bFinal:b}},function(e,t,n){"use strict";var r=n(22);function i(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function s(e,t,n,r,i,s){c[e]=c[e]+c[t]+i,c[r]=o(c[r]^c[e],16),c[n]=c[n]+c[r],c[t]=o(c[t]^c[n],12),c[e]=c[e]+c[t]+s,c[r]=o(c[r]^c[e],8),c[n]=c[n]+c[r],c[t]=o(c[t]^c[n],7)}function o(e,t){return e>>>t^e<<32-t}var a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),f=new Uint32Array(16);function l(e,t){var n=0;for(n=0;n<8;n++)c[n]=e.h[n],c[n+8]=a[n];for(c[12]^=e.t,c[13]^=e.t/4294967296,t&&(c[14]=~c[14]),n=0;n<16;n++)f[n]=i(e.b,4*n);for(n=0;n<10;n++)s(0,4,8,12,f[u[16*n+0]],f[u[16*n+1]]),s(1,5,9,13,f[u[16*n+2]],f[u[16*n+3]]),s(2,6,10,14,f[u[16*n+4]],f[u[16*n+5]]),s(3,7,11,15,f[u[16*n+6]],f[u[16*n+7]]),s(0,5,10,15,f[u[16*n+8]],f[u[16*n+9]]),s(1,6,11,12,f[u[16*n+10]],f[u[16*n+11]]),s(2,7,8,13,f[u[16*n+12]],f[u[16*n+13]]),s(3,4,9,14,f[u[16*n+14]],f[u[16*n+15]]);for(n=0;n<8;n++)e.h[n]^=c[n]^c[n+8]}function h(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");var r={h:new Uint32Array(a),b:new Uint32Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(p(r,t),r.c=64),r}function p(e,t){for(var n=0;n<t.length;n++)64===e.c&&(e.t+=e.c,l(e,!1),e.c=0),e.b[e.c++]=t[n]}function d(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;l(e,!0);for(var t=new Uint8Array(e.outlen),n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n)&255;return t}function b(e,t,n){n=n||32,e=r.normalizeInput(e);var i=h(n,t);return p(i,e),d(i)}e.exports={blake2s:b,blake2sHex:function(e,t,n){var i=b(e,t,n);return r.toHex(i)},blake2sInit:h,blake2sUpdate:p,blake2sFinal:d}},function(e,t,n){"use strict";(function(r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(79)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(21))},function(e,t,n){"use strict";e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function o(...e){if(!o.enabled)return;const t=o,i=Number(new Date),s=i-(n||i);t.diff=s,t.prev=n,t.curr=i,n=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const s=r.formatters[i];if("function"==typeof s){const r=e[a];n=s.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=s,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function s(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(80),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t,n){"use strict";var r=1e3,i=60*r,s=60*i,o=24*s,a=7*o,u=365.25*o;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"weeks":case"week":case"w":return n*a;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=s)return c(e,t,s,"hour");if(t>=i)return c(e,t,i,"minute");if(t>=r)return c(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";e.exports="\n  message Message {\n    message Wantlist {\n      message Entry {\n        // changed from string to bytes, it makes a difference in JavaScript\n        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)\n        optional int32 priority = 2;    // the priority (normalized). default to 1\n        optional bool cancel = 3;       // whether this revokes an entry\n      }\n\n      repeated Entry entries = 1;       // a list of wantlist entries\n      optional bool full = 2;           // whether this is the full wantlist. default to false\n    }\n\n    message Block {\n      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)\n      optional bytes data = 2;\n    }\n\n    optional Wantlist wantlist = 1;\n    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0\n    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0\n  }\n"},function(e,t,n){"use strict";const r=n(8).Entry;e.exports=class{constructor(e,t,n){this.entry=new r(e,t),this.cancel=Boolean(n)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get[Symbol.toStringTag](){const e=this.cid.toString("base58btc");return"BitswapMessageEntry ".concat(e," <cancel: ").concat(this.cancel,", priority: ").concat(this.priority,">")}equals(e){return this.cancel===e.cancel&&this.entry.equals(e.entry)}}},function(e,t,n){"use strict";e.exports=class{constructor(e,t){this._refCounter=1,this.cid=e,this.priority=t||1}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){const e=this.cid.toString("base58btc");return"WantlistEntry <key: ".concat(e,", priority: ").concat(this.priority,", refs: ").concat(this._refCounter,">")}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority}}},function(e,t,n){"use strict";const r=n(23),i=n(7),s=n(2).logger;e.exports=class{constructor(e,t,n){this.peerId=t,this.network=n,this.refcnt=1,this._entries=[],this._log=s(e,"msgqueue",t.toB58String().slice(0,8)),this.sendEntries=r(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new i(!1);this._entries.forEach(t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(t){return void this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),t.message)}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(e=>{this._log.error("send error: %s",e.message)})}}},function(e,t,n){"use strict";const r=n(86),i=n(92),s=n(114),o=n(7),a=n(11),u=n(2).logger,c="/ipfs/bitswap/1.0.0",f="/ipfs/bitswap/1.1.0";e.exports=class{constructor(e,t,n,r){this._log=u(e.peerInfo.id,"network"),n=n||{},this.libp2p=e,this.bitswap=t,this.b100Only=n.b100Only||!1,this._stats=r,this._running=!1}start(){this._running=!0,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this.libp2p.handle(c,this._onConnection),this.b100Only||this.libp2p.handle(f,this._onConnection),this.libp2p.on("peer:connect",this._onPeerConnect),this.libp2p.on("peer:disconnect",this._onPeerDisconnect),this.libp2p.peerBook.getAllArray().filter(e=>e.isConnected()).forEach(e=>this._onPeerConnect(e))}stop(){this._running=!1,this.libp2p.unhandle(c),this.b100Only||this.libp2p.unhandle(f),this.libp2p.removeListener("peer:connect",this._onPeerConnect),this.libp2p.removeListener("peer:disconnect",this._onPeerDisconnect)}_onConnection(e,t){this._running&&(this._log("incomming new bitswap connection: %s",e),i(t,r.decode(),i.asyncMap((e,t)=>s(o.deserialize)(e,t)),i.asyncMap((e,n)=>{t.getPeerInfo((t,r)=>{if(t)return n(t);s(this.bitswap._receiveMessage.bind(this.bitswap))(r.id,e,n)})}),i.onEnd(e=>{this._log("ending connection"),e&&this.bitswap._receiveError(e)})))}_onPeerConnect(e){this._running&&this.bitswap._onPeerConnected(e.id)}_onPeerDisconnect(e){this._running&&this.bitswap._onPeerDisconnected(e.id)}findProviders(e,t){return this.libp2p.contentRouting.findProviders(e,{maxTimeout:a.providerRequestTimeout,maxNumProviders:t})}async findAndConnect(e){const t=await this.findProviders(e,a.maxProvidersPerRequest);this._log("connecting to providers",t.map(e=>e.id.toB58String())),await Promise.all(t.map(e=>this.connectTo(e)))}async provide(e){await this.libp2p.contentRouting.provide(e)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const n=e.toB58String()?e.toB58String():e.id.toB58String();this._log("sendMessage to %s",n,t);const{conn:s,protocol:o}=await this._dialPeer(e);let a;switch(o){case c:a=t.serializeToBitswap100();break;case f:a=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+o)}!function(e,t,n){i(i.values([t]),r.encode(),e.conn,i.onEnd(e=>{e&&n(e)}))}(s,a,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e){if(!this._running)throw new Error("network isn't running");return this.libp2p.dial(e)}async _dialPeer(e){try{return{conn:await this.libp2p.dialProtocol(e,f),protocol:f}}catch(t){return{conn:await this.libp2p.dialProtocol(e,c),protocol:c}}}_updateSentStats(e,t){const n=e.toB58String();this._stats&&(t.forEach(e=>this._stats.push(n,"dataSent",e.data.length)),this._stats.push(n,"blocksSent",t.size))}}},function(e,t,n){"use strict";const r=n(87),i=n(88);t.encode=r,t.decode=i.decode,t.decodeFromReader=i.decodeFromReader},function(e,t,n){"use strict";const r=n(3).Buffer;e.exports=function(e){e=Object.assign({fixed:!1},e||{});const t=n(1);let i=e.fixed?null:s(),o=0,a=!1;return n=>(u,c)=>{if(u&&(a=u),a)return c(a);n(null,(n,u)=>{if(n&&(a=n),a)return c(a);if(!a&&!r.isBuffer(u))return a=new Error("data must be a buffer"),c(a);const f=a?0:u.length;let l;if(e.fixed?(l=r.alloc(4),l.writeInt32BE(f,0)):(t.encode(f,i,o),o+=t.encode.bytes,l=i.slice(o-t.encode.bytes,o),i.length-o<100&&(i=s(),o=0)),a)return c(null,l);c(null,r.concat([l,u],(e.fixed?4:t.encode.bytes)+f))})}};const i=10240;function s(){return r.alloc(i)}},function(e,t,n){"use strict";const r=n(1),i=n(89),s=n(3).Buffer,o=n(91);t.decode=function(e){let t=new i,n=o(e=>{t.abort(e)});return r=>{return t(r),function r(){let i=!0,s=!1;const o=(e,t)=>{s=!0,e?(n.end(e),i=!1):(n.push(t),i||r())};for(;i;)s=!1,c(t,e,o),s||(i=!1)}(),n}},t.decodeFromReader=function(e,t,n){"function"==typeof t&&(n=t,t={});c(e,t,(function(e,t){if(e)return n(!0===e?new Error("Unexpected end of input from reader."):e);n(null,t)}))};const a=e=>!(128&e),u=4194304;function c(e,t,n){(t=Object.assign({fixed:!1,maxLength:u},t||{})).fixed?function(e,t,n){e.read(4,(r,i)=>{if(r)return n(r);const s=i.readInt32BE(0);if(s>t)return n(new Error("size longer than max permitted length of "+t+"!"));f(e,s,n)})}(e,t.maxLength,n):function(e,t,n){let i=[];0===i.length&&function o(){e.read(1,(u,c)=>{if(u)return n(u);if(i.push(c),c&&!a(c[0]))return void o();const l=r.decode(s.concat(i));if(l>t)return n(new Error("size longer than max permitted length of "+t+"!"));f(e,l,(e,t)=>e?n(e):(i=[],t.length<l?n(new Error("Message length does not match prefix specified length.")):void n(null,t)))})}()}(e,t.maxLength,n)}function f(e,t,n){e.read(t,(e,t)=>{if(e)return n(e);n(null,t)})}},function(e,t,n){"use strict";var r=n(90);function i(e){return"function"==typeof e}function s(e,t){return t?function(n,r){var i=setTimeout((function(){e(new Error("pull-reader: read exceeded timeout"),r)}),t);e(n,(function(e,t){clearTimeout(i),r(e,t)}))}:e}e.exports=function(e){var t,n,o,a,u,c=[],f=!1,l=r();function h(){for(;c.length;)if(null==c[0].length&&l.has(1))c.shift().cb(null,l.get());else if(l.has(c[0].length)){var e=c.shift();e.cb(null,l.get(e.length))}else if(1==o&&c[0].length&&l.length<c[0].length){var t="stream ended with:"+l.length+" but wanted:"+c[0].length;c.shift().cb(new Error(t))}else{if(!o)return!!c.length;c.shift().cb(o)}return c.length||!l.has(1)||u}function p(){h()&&!f&&(!t||f||a||(f=!0,n(null,(function(e,t){if(f=!1,e)return o=e,h();l.add(t),p()}))))}function d(r){if(u){for(;c.length;)c.shift().cb(u);return cb&&cb(u)}n=s(r,e),t=r,p()}return d.abort=function(e,n){u=e||!0,t?(f=!0,t(u,(function(){for(;c.length;)c.shift().cb(u);n&&n(u)}))):n()},d.read=function(n,r,o){if(i(r)&&(o=r,r=e),!i(o))return a=!0,function(e,n){if(f||l.has(1)){if(e)return t(e,n);c.push({length:null,cb:n}),p()}else s(t,r)(e,(function(e,t){n(e,t)}))};var u;c.push({length:(u=n,Number.isFinite(u)?n:null),cb:o}),p()},d}},function(e,t,n){"use strict";(function(t){e.exports=function(){var e=[],n=0;return{length:n,data:this,add:function(r){if(!t.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=n+=r.length,e.push(r),this},has:function(e){return null==e?n>0:n>=e},get:function(r){var i;if(null==r||r===n){n=0;var s=e;return e=[],1==s.length?s[0]:t.concat(s)}if(e.length>1&&r<=(i=e[0].length)){var o=e[0].slice(0,r);return r===i?e.shift():e[0]=e[0].slice(r,i),n-=r,o}if(r<n){for(var a=[],u=0;u+e[0].length<r;){var c=e.shift();u+=c.length,a.push(c)}return u<r&&(a.push(e[0].slice(0,r-u)),e[0]=e[0].slice(r-u,e[0].length),this.length=n-=r),t.concat(a)}throw new Error("could not get "+r+" bytes")}}}}).call(this,n(0).Buffer)},function(e,t,n){"use strict";e.exports=function(e,t){"function"==typeof e&&(t=e,e=!1);var n,r,i,s=[];function o(e,t){e&&(n=e,r&&f(n)),r=t,c()}function a(e){i=i||e||!0,c()}function u(e){i||(r?f(n,e):s.push(e))}if(e)return{push:u,end:a,source:o,buffer:s};return o.push=u,o.end=a,o.buffer=s,o;function c(){r&&(n?f(n):!s.length&&i?f(i):s.length&&f(null,s.shift()))}function f(e,n){var i=r;if(e&&t){var s=t;t=null,s(!0===e?null:e)}r=null,i(e,n)}}},function(e,t,n){"use strict";var r=n(93),i=n(99),s=n(105);for(var o in(t=e.exports=n(113)).pull=t,r)t[o]=r[o];for(var o in s)t[o]=s[o];for(var o in i)t[o]=i[o]},function(e,t,n){"use strict";e.exports={keys:n(94),once:n(25),values:n(12),count:n(95),infinite:n(96),empty:n(97),error:n(98)}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e){return r(Object.keys(e))}},function(e,t,n){"use strict";e.exports=function(e){var t=0;return e=e||1/0,function(n,r){return n?r&&r(n):t>e?r(!0):void r(null,t++)}}},function(e,t,n){"use strict";e.exports=function(e){return e=e||Math.random,function(t,n){return t?n&&n(t):n(null,e())}}},function(e,t,n){"use strict";e.exports=function(){return function(e,t){t(!0)}}},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){n(e)}}},function(e,t,n){"use strict";e.exports={drain:n(5),onEnd:n(100),log:n(101),find:n(102),reduce:n(13),collect:n(103),concat:n(104)}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){return r(null,e)}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){return r((function(e){console.log(e)}),e)}},function(e,t,n){"use strict";function r(e){return e}var i=n(6),s=n(5);e.exports=function(e,t){var n=!1;return t?e=i(e)||r:(t=e,e=r),s((function(r){if(e(r))return n=!0,t(null,r),!1}),(function(e){n||t(!0===e?null:e,null)}))}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){return r((function(e,t){return e.push(t),e}),[],e)}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){return r((function(e,t){return e+t}),"",e)}},function(e,t,n){"use strict";e.exports={map:n(106),asyncMap:n(107),filter:n(14),filterNot:n(108),through:n(109),take:n(110),unique:n(27),nonUnique:n(111),flatten:n(112)}},function(e,t,n){"use strict";function r(e){return e}var i=n(6);e.exports=function(e){return e?(e=i(e),function(t){return function(n,r){t(n,(function(n,i){try{i=n?null:e(i)}catch(s){return t(s,(function(){return r(s)}))}r(n,i)}))}}):r}},function(e,t,n){"use strict";function r(e){return e}var i=n(6);e.exports=function(e){if(!e)return r;e=i(e);var t,n,s=!1;return function(r){return function i(o,a){if(n)return a(n);o?(n=o,r(o,s?function(e){s?t=a:a(o)}:function(e){a(o)})):r(null,(function(r,o){r?a(r):n?a(n):(s=!0,e(o,(function(e,r){s=!1,n?(a(n),t&&t(n)):e?i(e,a):a(null,r)})))}))}}}},function(e,t,n){"use strict";var r=n(26),i=n(14);e.exports=function(e){return e=r(e),i((function(t){return!e(t)}))}},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1;function r(e){!n&&t&&(n=!0,t(!0===e?null:e))}return function(t){return function(n,i){return n&&r(n),t(n,(function(t,n){t?r(t):e&&e(n),i(t,n)}))}}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=(t=t||{}).last||!1,r=!1;if("number"==typeof e){n=!0;var i=e;e=function(){return--i}}return function(t){function i(e){t(!0,(function(t){n=!1,e(t||!0)}))}return function(s,o){r&&!s?n?i(o):o(r):(r=s)?t(r,o):t(null,(function(t,s){(r=r||t)?o(r):e(s)?o(null,s):(r=!0,n?o(null,s):i(o))}))}}}},function(e,t,n){"use strict";var r=n(27);e.exports=function(e){return r(e,!0)}},function(e,t,n){"use strict";var r=n(12),i=n(25);e.exports=function(){return function(e){var t;return function(n,s){function o(){t(null,(function(t,n){!0===t?a():t?e(!0,(function(e){s(t)})):s(null,n)}))}function a(){t=null,e(null,(function(e,n){if(e)return s(e);Array.isArray(n)||n&&"object"==typeof n?n=r(n):"function"!=typeof n&&(n=i(n)),t=n,o()}))}n?t?t(n,(function(t){e(t||n,s)})):e(n,s):t?o():a()}}}},function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length;if("function"==typeof t&&1===t.length){for(var r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(t){if(null==r)throw new TypeError("partial sink should only be called once!");var i=r;switch(r=null,n){case 1:return e(t,i[0]);case 2:return e(t,i[0],i[1]);case 3:return e(t,i[0],i[1],i[2]);case 4:return e(t,i[0],i[1],i[2],i[3]);default:return i.unshift(t),e.apply(null,i)}}}var s=t;s&&"function"==typeof s.source&&(s=s.source);for(i=1;i<n;i++){var o=arguments[i];"function"==typeof o?s=o(s):o&&"object"==typeof o&&(o.sink(s),s=o.source)}return s}},function(e,t,n){"use strict";e.exports=function(e){var t=e.length;return function(){var n=[].slice.call(arguments),r=this;if(n.length!==t+1||"function"!=typeof n[t])return e.apply(r,arguments);var i=n.pop();e.apply(this,n).then((function(e){i.call(r,null,e)}),(function(e){i.call(r,e)}))}},e.exports.variadic=function(e){return function(){var t=[].slice.call(arguments),n=this;if(!(t.length>=1&&"function"==typeof t[t.length-1]))return e.apply(n,arguments);var r=t.pop();e.apply(this,t).then((function(e){r.call(n,null,e)}),(function(e){r.call(n,e)}))}}},function(e,t,n){"use strict";const r=n(23),i=n(7),s=n(8),o=n(116),{logger:a,groupBy:u,pullAllWith:c,uniqWith:f}=n(2),l=524288;e.exports=class{constructor(e,t,n,i){this._log=a(e,"engine"),this.blockstore=t,this.network=n,this._stats=i,this.ledgerMap=new Map,this._running=!1,this._tasks=[],this._outbox=r(this._processTasks.bind(this),100)}async _sendBlocks(e,t){if(t.reduce((e,t)=>e+t.data.byteLength,0)<l)return void await this._sendSafeBlocks(e,t);let n=0,r=[],i=t.length;for(const o of t)if(i--,r.push(o),n+=o.data.byteLength,n>=l||0===i){n=0;const t=r.slice();r=[];try{await this._sendSafeBlocks(e,t)}catch(s){this._log("sendblock error: %s",s.message)}}}async _sendSafeBlocks(e,t){const n=new i(!1);t.forEach(e=>n.addBlock(e)),await this.network.sendMessage(e,n)}async _processTasks(){if(!this._running||!this._tasks.length)return;const e=this._tasks;this._tasks=[];const t=e.map(e=>e.entry).map(e=>e.cid),n=f((e,t)=>e.equals(t),t),r=u(e=>e.target.toB58String(),e),i=await Promise.all(n.map(e=>this.blockstore.get(e)));await Promise.all(Object.values(r).map(async e=>{const n=e[0].target,r=t.map(e=>i.find(t=>t.cid.equals(e)));try{await this._sendBlocks(n,r)}catch(s){return void this._log.error("should never happen: ",s)}for(const t of r)this.messageSent(n,t)})),this._tasks=[]}wantlistForPeer(e){const t=e.toB58String();return this.ledgerMap.has(t)?this.ledgerMap.get(t).wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toB58String(),n=this.ledgerMap.get(t);return n?{peer:n.partner.toPrint(),value:n.debtRatio(),sent:n.accounting.bytesSent,recv:n.accounting.bytesRecv,exchanged:n.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){e.length&&(this.ledgerMap.forEach(t=>{e.map(e=>t.wantlistContains(e)).filter(Boolean).forEach(e=>{this._tasks.push({entry:e,target:t.partner})})}),this._outbox())}async messageReceived(e,t){const n=this._findOrCreate(e);if(t.empty)return;if(t.full&&(n.wantlist=new s),this._processBlocks(t.blocks,n),0===t.wantlist.size)return;const r=[],i=[];t.wantlist.forEach(e=>{e.cancel?(n.cancelWant(e.cid),r.push(e)):(n.wants(e.cid,e.priority),i.push(e))}),this._cancelWants(n,e,r),await this._addWants(n,e,i)}_cancelWants(e,t,n){const r=t.toB58String();this._tasks=c((e,t)=>{const n=e.target.toB58String()===r,i=e.entry.cid.equals(t.cid);return n&&i},this._tasks,n)}async _addWants(e,t,n){await Promise.all(n.map(async e=>{let n;try{n=await this.blockstore.has(e.cid)}catch(r){return void this._log.error("failed blockstore existence check for "+e.cid)}n&&this._tasks.push({entry:e.entry,target:t})})),this._outbox()}_processBlocks(e,t){const n=[];e.forEach((e,r)=>{this._log("got block (%s bytes)",e.data.length),t.receivedBytes(e.data.length),n.push(e.cid)}),this.receivedBlocks(n)}messageSent(e,t){const n=this._findOrCreate(e);n.sentBytes(t?t.data.length:0),t&&t.cid&&n.wantlist.remove(t.cid)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){const t=e.toB58String();if(this.ledgerMap.has(t))return this.ledgerMap.get(t);const n=new o(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}}},function(e,t,n){"use strict";const r=n(8);e.exports=class{constructor(e){this.partner=e,this.wantlist=new r,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t){this.wantlist.add(e,t)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.contains(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}},function(e,t,n){"use strict";const r=n(15).EventEmitter,i=n(11),s=n(2).logger,o=e=>"unwant:".concat(e),a=e=>"block:".concat(e);e.exports=class extends r{constructor(e){super(),this.setMaxListeners(i.maxListeners),this._log=s(e,"notif"),this._unwantListeners={},this._blockListeners={}}hasBlock(e){const t=e.cid.toString("base58btc"),n="block:".concat(t);this._log(n),this.emit(n,e)}wantBlock(e){const t=e.toString("base58btc");return this._log("wantBlock:".concat(t)),new Promise((e,n)=>{this._unwantListeners[t]=()=>{this._log("manual unwant: ".concat(t)),this._cleanup(t),e()},this._blockListeners[t]=n=>{this._cleanup(t),e(n)},this.once(o(t),this._unwantListeners[t]),this.once(a(t),this._blockListeners[t])})}unwantBlock(e){const t="unwant:".concat(e.toString("base58btc"));this._log(t),this.emit(t)}_cleanup(e){this._unwantListeners[e]&&(this.removeListener(o(e),this._unwantListeners[e]),delete this._unwantListeners[e]),this._blockListeners[e]&&(this.removeListener(a(e),this._blockListeners[e]),delete this._blockListeners[e])}}},function(e,t,n){"use strict";const r=n(15),i=n(119),s={movingAverageIntervals:[6e4,3e5,9e5]};e.exports=class extends r{constructor(e,t){super();const n=Object.assign({},s,t);if("number"!=typeof n.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof n.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=n,this._enabled=this._options.enabled,this._global=new i(e,n),this._global.on("update",e=>this.emit("update",e)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){return e.toB58String&&(e=e.toB58String()),this._peers.get(e)}push(e,t,n){if(this._enabled&&(this._global.push(t,n),e)){let r=this._peers.get(e);r||(r=new i(this._initialCounters,this._options),this._peers.set(e,r)),r.push(t,n)}}disconnected(e){const t=e.toB58String(),n=this._peers.get(t);n&&(n.stop(),this._peers.delete(t))}}},function(e,t,n){"use strict";const r=n(15),i=n(120),s=n(121);e.exports=class extends r{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(e=>{this._stats[e]=i(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach(t=>{(this._movingAverages[e][t]=s(t)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach(n=>{this._updateFrequencyFor(n,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,n){const r=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=r/t*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(e=>{let t=o[e];t||(t=o[e]=s(e)),t.push(n,i)})}_applyOp(e){const t=e[0],n=e[1];if("number"!=typeof n)throw new Error("invalid increment number:",n);let r;r=Object.prototype.hasOwnProperty.call(this._stats,t)?this._stats[t]:this._stats[t]=i(0),this._stats[t]=r.plus(n),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=n}}},function(e,t,n){"use strict";var r;!function(i){var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",f=c+"Number primitive has more than 15 significant digits: ",l=1e14,h=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],b=1e7,k=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=h-t.length;n--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var n,r,i=e.c,s=t.c,o=e.s,a=t.s,u=e.e,c=t.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=u==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(a=(u=i.length)<(c=s.length)?u:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return u==c?0:u>c^n?1:-1}function w(e,t,n,r){if(e<t||e>n||e!==u(e))throw Error(c+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return g(e.e/h)==t&&e.c[t]%2!=0}function S(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}(s=function e(t){var n,r,i,s,_,x,C,A,B,O=q.prototype={constructor:q,toString:null,valueOf:null},T=new q(1),P=20,R=4,L=-7,I=21,M=-1e7,U=1e7,N=!1,j=1,F=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},z="0123456789abcdefghijklmnopqrstuvwxyz";function q(e,t){var n,s,a,c,l,d,b,k,g=this;if(!(g instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>U?g.c=g.e=null:e.e<M?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,l=e;l>=10;l/=10,c++);return void(c>U?g.c=g.e=null:(g.e=c,g.c=[e]))}k=String(e)}else{if(!o.test(k=String(e)))return i(g,k,d);g.s=45==k.charCodeAt(0)?(k=k.slice(1),-1):1}(c=k.indexOf("."))>-1&&(k=k.replace(".","")),(l=k.search(/e/i))>0?(c<0&&(c=l),c+=+k.slice(l+1),k=k.substring(0,l)):c<0&&(c=k.length)}else{if(w(t,2,z.length,"Base"),10==t)return W(g=new q(e),P+g.e+1,R);if(k=String(e),d="number"==typeof e){if(0*e!=0)return i(g,k,d,t);if(g.s=1/e<0?(k=k.slice(1),-1):1,q.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(f+e)}else g.s=45===k.charCodeAt(0)?(k=k.slice(1),-1):1;for(n=z.slice(0,t),c=l=0,b=k.length;l<b;l++)if(n.indexOf(s=k.charAt(l))<0){if("."==s){if(l>c){c=b;continue}}else if(!a&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){a=!0,l=-1,c=0;continue}return i(g,String(e),d,t)}d=!1,(c=(k=r(k,t,10,g.s)).indexOf("."))>-1?k=k.replace(".",""):c=k.length}for(l=0;48===k.charCodeAt(l);l++);for(b=k.length;48===k.charCodeAt(--b););if(k=k.slice(l,++b)){if(b-=l,d&&q.DEBUG&&b>15&&(e>p||e!==u(e)))throw Error(f+g.s*e);if((c=c-l-1)>U)g.c=g.e=null;else if(c<M)g.c=[g.e=0];else{if(g.e=c,g.c=[],l=(c+1)%h,c<0&&(l+=h),l<b){for(l&&g.c.push(+k.slice(0,l)),b-=h;l<b;)g.c.push(+k.slice(l,l+=h));l=h-(k=k.slice(l)).length}else l-=b;for(;l--;k+="0");g.c.push(+k)}}else g.c=[g.e=0]}function Y(e,t,n,r){var i,s,o,a,u;if(null==n?n=R:w(n,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)u=m(e.c),u=1==r||2==r&&(o<=L||o>=I)?S(u,o):E(u,o,"0");else if(s=(e=W(new q(e),t,n)).e,a=(u=m(e.c)).length,1==r||2==r&&(t<=s||s<=L)){for(;a<t;u+="0",a++);u=S(u,s)}else if(t-=o,u=E(u,s,"0"),s+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-a)>0)for(s+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function H(e,t){for(var n,r=1,i=new q(e[0]);r<e.length;r++){if(!(n=new q(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function V(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*h-1)>U?e.c=e.e=null:n<M?e.c=[e.e=0]:(e.e=n,e.c=t),e}function W(e,t,n,r){var i,s,o,c,f,p,b,k=e.c,g=d;if(k){e:{for(i=1,c=k[0];c>=10;c/=10,i++);if((s=t-i)<0)s+=h,o=t,b=(f=k[p=0])/g[i-o-1]%10|0;else if((p=a((s+1)/h))>=k.length){if(!r)break e;for(;k.length<=p;k.push(0));f=b=0,i=1,o=(s%=h)-h+1}else{for(f=c=k[p],i=1;c>=10;c/=10,i++);b=(o=(s%=h)-h+i)<0?0:f/g[i-o-1]%10|0}if(r=r||t<0||null!=k[p+1]||(o<0?f:f%g[i-o-1]),r=n<4?(b||r)&&(0==n||n==(e.s<0?3:2)):b>5||5==b&&(4==n||r||6==n&&(s>0?o>0?f/g[i-o]:0:k[p-1])%10&1||n==(e.s<0?8:7)),t<1||!k[0])return k.length=0,r?(t-=e.e+1,k[0]=g[(h-t%h)%h],e.e=-t||0):k[0]=e.e=0,e;if(0==s?(k.length=p,c=1,p--):(k.length=p+1,c=g[h-s],k[p]=o>0?u(f/g[i-o]%g[o])*c:0),r)for(;;){if(0==p){for(s=1,o=k[0];o>=10;o/=10,s++);for(o=k[0]+=c,c=1;o>=10;o/=10,c++);s!=c&&(e.e++,k[0]==l&&(k[0]=1));break}if(k[p]+=c,k[p]!=l)break;k[p--]=0,c=1}for(s=k.length;0===k[--s];k.pop());}e.e>U?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function G(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=L||n>=I?S(t,n):E(t,n,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(w(n=e[t],0,k,t),P=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(w(n=e[t],0,8,t),R=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(w(n[0],-k,0,t),w(n[1],0,k,t),L=n[0],I=n[1]):(w(n,-k,k,t),L=-(I=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)w(n[0],-k,-1,t),w(n[1],1,k,t),M=n[0],U=n[1];else{if(w(n,-k,k,t),!n)throw Error(c+t+" cannot be zero: "+n);M=-(U=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(c+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!n,Error(c+"crypto unavailable");N=n}else N=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(w(n=e[t],0,9,t),j=n),e.hasOwnProperty(t="POW_PRECISION")&&(w(n=e[t],0,k,t),F=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(c+t+" not an object: "+n);D=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(c+t+" invalid: "+n);z=n}}return{DECIMAL_PLACES:P,ROUNDING_MODE:R,EXPONENTIAL_AT:[L,I],RANGE:[M,U],CRYPTO:N,MODULO_MODE:j,POW_PRECISION:F,FORMAT:D,ALPHABET:z}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,n,r=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&i>=-k&&i<=k&&i===u(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%h)<1&&(t+=h),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=l||n!==u(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(c+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return H(arguments,O.lt)},q.minimum=q.min=function(){return H(arguments,O.gt)},q.random=(s=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,o,f=0,l=[],p=new q(T);if(null==e?e=P:w(e,0,k),i=a(e/h),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));f<i;)(o=131072*t[f]+(t[f+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[f]=n[0],t[f+1]=n[1]):(l.push(o%1e14),f+=2);f=i/2}else{if(!crypto.randomBytes)throw N=!1,Error(c+"crypto unavailable");for(t=crypto.randomBytes(i*=7);f<i;)(o=281474976710656*(31&t[f])+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15?crypto.randomBytes(7).copy(t,f):(l.push(o%1e14),f+=7);f=i/7}if(!N)for(;f<i;)(o=s())<9e15&&(l[f++]=o%1e14);for(i=l[--f],e%=h,i&&e&&(o=d[h-e],l[f]=u(i/o)*o);0===l[f];l.pop(),f--);if(f<0)l=[r=0];else{for(r=-1;0===l[0];l.splice(0,1),r-=h);for(f=1,o=l[0];o>=10;o/=10,f++);f<h&&(r-=h-f)}return p.e=r,p.c=l,p}),q.sum=function(){for(var e=1,t=arguments,n=new q(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){function e(e,t,n,r){for(var i,s,o=[0],a=0,u=e.length;a<u;){for(s=o.length;s--;o[s]*=t);for(o[0]+=r.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>n-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}return function(t,r,i,s,o){var a,u,c,f,l,h,p,d,b=t.indexOf("."),k=P,g=R;for(b>=0&&(f=F,F=0,t=t.replace(".",""),h=(d=new q(r)).pow(t.length-b),F=f,d.c=e(E(m(h.c),h.e,"0"),10,i,"0123456789"),d.e=d.c.length),c=f=(p=e(t,r,i,o?(a=z,"0123456789"):(a="0123456789",z))).length;0==p[--f];p.pop());if(!p[0])return a.charAt(0);if(b<0?--c:(h.c=p,h.e=c,h.s=s,p=(h=n(h,d,k,g,i)).c,l=h.r,c=h.e),b=p[u=c+k+1],f=i/2,l=l||u<0||null!=p[u+1],l=g<4?(null!=b||l)&&(0==g||g==(h.s<0?3:2)):b>f||b==f&&(4==g||l||6==g&&1&p[u-1]||g==(h.s<0?8:7)),u<1||!p[0])t=l?E(a.charAt(1),-k,a.charAt(0)):a.charAt(0);else{if(p.length=u,l)for(--i;++p[--u]>i;)p[u]=0,u||(++c,p=[1].concat(p));for(f=p.length;!p[--f];);for(b=0,t="";b<=f;t+=a.charAt(p[b++]));t=E(t,c,a.charAt(0))}return t}}(),n=function(){function e(e,t,n){var r,i,s,o,a=0,u=e.length,c=t%b,f=t/b|0;for(e=e.slice();u--;)a=((i=c*(s=e[u]%b)+(r=f*s+(o=e[u]/b|0)*c)%b*b+a)/n|0)+(r/b|0)+f*o,e[u]=i%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,s,o,a){var c,f,p,d,b,k,m,y,w,v,S,E,_,x,C,A,B,O=r.s==i.s?1:-1,T=r.c,P=i.c;if(!(T&&T[0]&&P&&P[0]))return new q(r.s&&i.s&&(T?!P||T[0]!=P[0]:P)?T&&0==T[0]||!P?0*O:O/0:NaN);for(w=(y=new q(O)).c=[],O=s+(f=r.e-i.e)+1,a||(a=l,f=g(r.e/h)-g(i.e/h),O=O/h|0),p=0;P[p]==(T[p]||0);p++);if(P[p]>(T[p]||0)&&f--,O<0)w.push(1),d=!0;else{for(x=T.length,A=P.length,p=0,O+=2,(b=u(a/(P[0]+1)))>1&&(P=e(P,b,a),T=e(T,b,a),A=P.length,x=T.length),_=A,S=(v=T.slice(0,A)).length;S<A;v[S++]=0);B=P.slice(),B=[0].concat(B),C=P[0],P[1]>=a/2&&C++;do{if(b=0,(c=t(P,v,A,S))<0){if(E=v[0],A!=S&&(E=E*a+(v[1]||0)),(b=u(E/C))>1)for(b>=a&&(b=a-1),m=(k=e(P,b,a)).length,S=v.length;1==t(k,v,m,S);)b--,n(k,A<m?B:P,m,a),m=k.length,c=1;else 0==b&&(c=b=1),m=(k=P.slice()).length;if(m<S&&(k=[0].concat(k)),n(v,k,S,a),S=v.length,-1==c)for(;t(P,v,A,S)<1;)b++,n(v,A<S?B:P,S,a),S=v.length}else 0===c&&(b++,v=[0]);w[p++]=b,v[0]?v[S++]=T[_]||0:(v=[T[_]],S=1)}while((_++<x||null!=v[0])&&O--);d=null!=v[0],w[0]||w.splice(0,1)}if(a==l){for(p=1,O=w[0];O>=10;O/=10,p++);W(y,s+(y.e=p+f*h-1)+1,o,d)}else y.e=f,y.r=+d;return y}}(),_=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,C=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,n,r){var i,s=n?t:t.replace(B,"");if(A.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(_,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,s=s.replace(x,"$1").replace(C,"0.$1")),t!=s))return new q(s,i);if(q.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},O.absoluteValue=O.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},O.comparedTo=function(e,t){return y(this,new q(e,t))},O.decimalPlaces=O.dp=function(e,t){var n,r,i,s=this;if(null!=e)return w(e,0,k),null==t?t=R:w(t,0,8),W(new q(s),e+s.e+1,t);if(!(n=s.c))return null;if(r=((i=n.length-1)-g(this.e/h))*h,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},O.dividedBy=O.div=function(e,t){return n(this,new q(e,t),P,R)},O.dividedToIntegerBy=O.idiv=function(e,t){return n(this,new q(e,t),0,1)},O.exponentiatedBy=O.pow=function(e,t){var n,r,i,s,o,f,l,p,d=this;if((e=new q(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+G(e));if(null!=t&&(t=new q(t)),o=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return p=new q(Math.pow(+G(d),o?2-v(e):+G(e))),t?p.mod(t):p;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(r=!f&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||o&&d.c[1]>=24e7:d.c[0]<8e13||o&&d.c[0]<=9999975e7)))return s=d.s<0&&v(e)?-0:0,d.e>-1&&(s=1/s),new q(f?1/s:s);F&&(s=a(F/h+2))}for(o?(n=new q(.5),f&&(e.s=1),l=v(e)):l=(i=Math.abs(+G(e)))%2,p=new q(T);;){if(l){if(!(p=p.times(d)).c)break;s?p.c.length>s&&(p.c.length=s):r&&(p=p.mod(t))}if(i){if(0===(i=u(i/2)))break;l=i%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)l=v(e);else{if(0===(i=+G(e)))break;l=i%2}d=d.times(d),s?d.c&&d.c.length>s&&(d.c.length=s):r&&(d=d.mod(t))}return r?p:(f&&(p=T.div(p)),t?p.mod(t):s?W(p,F,R,void 0):p)},O.integerValue=function(e){var t=new q(this);return null==e?e=R:w(e,0,8),W(t,t.e+1,e)},O.isEqualTo=O.eq=function(e,t){return 0===y(this,new q(e,t))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(e,t){return y(this,new q(e,t))>0},O.isGreaterThanOrEqualTo=O.gte=function(e,t){return 1===(t=y(this,new q(e,t)))||0===t},O.isInteger=function(){return!!this.c&&g(this.e/h)>this.c.length-2},O.isLessThan=O.lt=function(e,t){return y(this,new q(e,t))<0},O.isLessThanOrEqualTo=O.lte=function(e,t){return-1===(t=y(this,new q(e,t)))||0===t},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(e,t){var n,r,i,s,o=this,a=o.s;if(t=(e=new q(e,t)).s,!a||!t)return new q(NaN);if(a!=t)return e.s=-t,o.plus(e);var u=o.e/h,c=e.e/h,f=o.c,p=e.c;if(!u||!c){if(!f||!p)return f?(e.s=-t,e):new q(p?o:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-t,e):new q(f[0]?o:3==R?-0:0)}if(u=g(u),c=g(c),f=f.slice(),a=u-c){for((s=a<0)?(a=-a,i=f):(c=u,i=p),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(r=(s=(a=f.length)<(t=p.length))?a:t,a=t=0;t<r;t++)if(f[t]!=p[t]){s=f[t]<p[t];break}if(s&&(i=f,f=p,p=i,e.s=-e.s),(t=(r=p.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=l-1;r>a;){if(f[--r]<p[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=l}f[r]-=p[r]}for(;0==f[0];f.splice(0,1),--c);return f[0]?V(e,f,c):(e.s=3==R?-1:1,e.c=[e.e=0],e)},O.modulo=O.mod=function(e,t){var r,i,s=this;return e=new q(e,t),!s.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||s.c&&!s.c[0]?new q(s):(9==j?(i=e.s,e.s=1,r=n(s,e,0,3),e.s=i,r.s*=i):r=n(s,e,0,j),(e=s.minus(r.times(e))).c[0]||1!=j||(e.s=s.s),e)},O.multipliedBy=O.times=function(e,t){var n,r,i,s,o,a,u,c,f,p,d,k,m,y,w,v=this,S=v.c,E=(e=new q(e,t)).c;if(!(S&&E&&S[0]&&E[0]))return!v.s||!e.s||S&&!S[0]&&!E||E&&!E[0]&&!S?e.c=e.e=e.s=null:(e.s*=v.s,S&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=g(v.e/h)+g(e.e/h),e.s*=v.s,(u=S.length)<(p=E.length)&&(m=S,S=E,E=m,i=u,u=p,p=i),i=u+p,m=[];i--;m.push(0));for(y=l,w=b,i=p;--i>=0;){for(n=0,d=E[i]%w,k=E[i]/w|0,s=i+(o=u);s>i;)n=((c=d*(c=S[--o]%w)+(a=k*c+(f=S[o]/w|0)*d)%w*w+m[s]+n)/y|0)+(a/w|0)+k*f,m[s--]=c%y;m[s]=n}return n?++r:m.splice(0,1),V(e,m,r)},O.negated=function(){var e=new q(this);return e.s=-e.s||null,e},O.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new q(e,t)).s,!i||!t)return new q(NaN);if(i!=t)return e.s=-t,r.minus(e);var s=r.e/h,o=e.e/h,a=r.c,u=e.c;if(!s||!o){if(!a||!u)return new q(i/0);if(!a[0]||!u[0])return u[0]?e:new q(a[0]?r:0*i)}if(s=g(s),o=g(o),a=a.slice(),i=s-o){for(i>0?(o=s,n=u):(i=-i,n=a),n.reverse();i--;n.push(0));n.reverse()}for((i=a.length)-(t=u.length)<0&&(n=u,u=a,a=n,t=i),i=0;t;)i=(a[--t]=a[t]+u[t]+i)/l|0,a[t]=l===a[t]?0:a[t]%l;return i&&(a=[i].concat(a),++o),V(e,a,o)},O.precision=O.sd=function(e,t){var n,r,i,s=this;if(null!=e&&e!==!!e)return w(e,1,k),null==t?t=R:w(t,0,8),W(new q(s),e,t);if(!(n=s.c))return null;if(r=(i=n.length-1)*h+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&s.e+1>r&&(r=s.e+1),r},O.shiftedBy=function(e){return w(e,-p,p),this.times("1e"+e)},O.squareRoot=O.sqrt=function(){var e,t,r,i,s,o=this,a=o.c,u=o.s,c=o.e,f=P+4,l=new q("0.5");if(1!==u||!a||!a[0])return new q(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(u=Math.sqrt(+G(o)))||u==1/0?(((t=m(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=g((c+1)/2)-(c<0||c%2),r=new q(t=u==1/0?"1e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new q(u+""),r.c[0])for((u=(c=r.e)+f)<3&&(u=0);;)if(s=r,r=l.times(s.plus(n(o,s,f,1))),m(s.c).slice(0,u)===(t=m(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+P+2,1),e=!r.times(r).eq(o));break}if(!i&&(W(s,s.e+P+2,0),s.times(s).eq(o))){r=s;break}f+=4,u+=4,i=1}return W(r,r.e+P+1,R,e)},O.toExponential=function(e,t){return null!=e&&(w(e,0,k),e++),Y(this,e,t,1)},O.toFixed=function(e,t){return null!=e&&(w(e,0,k),e=e+this.e+1),Y(this,e,t)},O.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=D;else if("object"!=typeof n)throw Error(c+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var s,o=r.split("."),a=+n.groupSize,u=+n.secondaryGroupSize,f=n.groupSeparator||"",l=o[0],h=o[1],p=i.s<0,d=p?l.slice(1):l,b=d.length;if(u&&(s=a,a=u,u=s,b-=s),a>0&&b>0){for(s=b%a||a,l=d.substr(0,s);s<b;s+=a)l+=f+d.substr(s,a);u>0&&(l+=f+d.slice(s)),p&&(l="-"+l)}r=h?l+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):l}return(n.prefix||"")+r+(n.suffix||"")},O.toFraction=function(e){var t,r,i,s,o,a,u,f,l,p,b,k,g=this,y=g.c;if(null!=e&&(!(u=new q(e)).isInteger()&&(u.c||1!==u.s)||u.lt(T)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+G(u));if(!y)return new q(g);for(t=new q(T),l=r=new q(T),i=f=new q(T),k=m(y),o=t.e=k.length-g.e-1,t.c[0]=d[(a=o%h)<0?h+a:a],e=!e||u.comparedTo(t)>0?o>0?t:l:u,a=U,U=1/0,u=new q(k),f.c[0]=0;p=n(u,t,0,1),1!=(s=r.plus(p.times(i))).comparedTo(e);)r=i,i=s,l=f.plus(p.times(s=l)),f=s,t=u.minus(p.times(s=t)),u=s;return s=n(e.minus(r),i,0,1),f=f.plus(s.times(l)),r=r.plus(s.times(i)),f.s=l.s=g.s,b=n(l,i,o*=2,R).minus(g).abs().comparedTo(n(f,r,o,R).minus(g).abs())<1?[l,i]:[f,r],U=a,b},O.toNumber=function(){return+G(this)},O.toPrecision=function(e,t){return null!=e&&w(e,1,k),Y(this,e,t,2)},O.toString=function(e){var t,n=this,i=n.s,s=n.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=L||s>=I?S(m(n.c),s):E(m(n.c),s,"0"):10===e?t=E(m((n=W(new q(n),P+s+1,R)).c),n.e,"0"):(w(e,2,z.length,"Base"),t=r(E(m(n.c),s,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},O.valueOf=O.toJSON=function(){return G(this)},O._isBigNumber=!0,null!=t&&q.set(t),q}()).default=s.BigNumber=s,void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";const r=Math.exp;e.exports=function(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,n,i=0,s=0,o=0,a={};return a.push=function(a,u){if(n){const c=1-r(-(a-n)/e),f=u-t;t=c*u+(1-c)*t,i=(1-c)*(i+f*(c*f)),s=Math.sqrt(i),o=t+c*f}else t=u;n=a},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}}])}));
//# sourceMappingURL=index.min.js.map